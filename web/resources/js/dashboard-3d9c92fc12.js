!function(e,t,o,r){"use strict";t.has(r,"dashboard")||(r.dashboard={}),r.dashboard.DashboardView=e.create({initialize:function(){r.data.dashboard_empty||(this.course_progress_fetcher=new r.dashboard.CourseProgressFetcher,this.unenrolling_manager=new r.dashboard.UnenrollingManager,r.goal_setter.init("dashboard")),o(".btn[title], h1 span[title]").tooltip()},scrollCloudsAndSun:function(){var e=o("html"),t=e.hasClass("night"),r=o(".clouds-header"),a=o(".sun"),n=t?126:64;o(window).scroll(function(){var e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;r.css("top",.6*e+68+"px"),a.css("top",.4*e+n+"px")})}}),r.renderer.ready(function(){r.view=new r.dashboard.DashboardView,r.view.scrollCloudsAndSun()})}(Class,_,jQuery,MEMRISE),function e(t,o,r){function a(s,i){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){var o=t[s][1][e];return a(o?o:e)},d,d.exports,e,t,o,r)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(e,t){"use strict";t.exports=function(e,t,o,r,a){function n(e){this.audio_mode=o.prop(e.audio_mode),this.video_mode=o.prop(e.video_mode),this.id=o.prop(e.id),this.name=o.prop(e.name),this.photo=o.prop(e.photo),this.percent_complete=o.prop(e.percent_complete||0),this.learned=o.prop(e.learned||0),this.num_things=o.prop(e.num_things),this.ignored=o.prop(e.ignored||0),this.category=o.prop(e.category),this.description=o.prop(e.description?e.description:""),this.url=o.prop(e.url),this.goal=o.prop(e.goal),this.difficult=o.prop(e.difficult||0),this.review=o.prop(Math.min(e.review||0,999)),this.learnUrl=o.prop(e.url+"garden/learn/"),this.reviewUrl=o.prop(e.url+"garden/classic_review/"),this.audioReviewUrl=o.prop(e.url+"garden/listening_skills/"),this.difficultUrl=o.prop(e.url+"garden/difficult_words/"),this.speedUrl=o.prop(e.url+"garden/speed_review/"),this.meetTheNatives=o.prop(e.url+"garden/meet_the_natives/"),this.leaderboardUrl=o.prop(e.url+"leaderboard"),this.proChats=o.prop(e.pro_chats||[]),this.grammarChats=o.prop(e.grammar_chats||[]),this.isGoalSet=function(){return this.goal()&&this.goal().goal>0},this.isGoalAchieved=function(){var e=this.goal();return e.points>=e.goal},this.isInProgress=function(){return this.percent_complete()<100}}function s(o,r){var a=e("html");t.modal.content({modalId:"modal-chat-selector",template:"chat-selector",styleVersion:2,backdrop:"static",seeThru:!1,removeOnHidden:!0,templateVars:{proChats:o.proChats(),grammarChats:o.grammarChats(),targetLanguage:o.category(),grammarVariant:r}},function(){a.addClass("no-scroll")},function(){a.removeClass("no-scroll")})}function i(t,o,r){var a=e(o);a.find(".see-all-plans").attr("href",p(r)),t.onclick=function(){a&&(a.modal("show"),"#mtn-upsell-modal"===o&&videojs("#mtn-video",{controlBar:!1}).ready(function(){this.play()}))}}function l(r){var a=r.vm.course();return o("span.ctrl-btn",[o("span.icon"),o("ul.tooltip",[o("li",[o("a.option-btn",{href:a.url()},[o("i.option-pin"),_t("Course details")])]),o("li",[o("a.option-btn",{onclick:function(o){o.preventDefault(),t.sharing.facebookShareClick(e(o.target))},href:"#","data-url":a.url(),"data-title":a.name(),"data-picture":a.photo(),"data-description":a.description(),"data-caption":_t("Memrise is a fun and easy way to learn and improve your memory!")},[o("i.option-share"),_t("Share with friends")])]),"teaching"===r.vm.currentFilter()?"":o("li",[o("span.option-btn",{onclick:function(){r.quitCourse()}},[o("i.option-delete"),_t("Quit course")])])])])}function u(e){var t=e.isInProgress(),r=t?["right"]:["right","half"];return o(".wrapper",[o(".course-progress",[o("div",{"class":r.join(" ")},[o("span",_t("__learned__ / __all__ words learned",{learned:e.learned(),all:e.num_things()-e.ignored()}))]),o(".progress-bar-container",[o(".progress-bar",{style:"width: "+e.percent_complete()+"%"})]),t?"":o(".left.half",[o("span.course-complete-text","Course Complete!")])])])}function d(e,t){var o=m(t,e),r=g(t,e),a=h(e),n=_(e),s=f(e),i=v(t,e),l=b(t,e),u=w(t,e);return[l,u,o,i,r,a,s,n]}function c(){var e=t.scb();return[e]}function p(e){return"/premium/?session_type="+e+"&source=mode_selector#features"}function m(e,t){var r=t.difficult(),a=["button"],n="",s="",l=[o("span.btn-img.img-star"),o("span.text",r)],u="a";e?r?(s=_t("Review your difficult words"),a.push("orange","img-and-text"),n=t.difficultUrl()):(s=_t("No difficult words to review"),u="span",a.push("disabled","img-and-text")):(s=_t("Learn more about My Difficult Words"),n="#",a.push("orange","img-and-text"));var d={title:s,href:n,"class":a.join(" "),"data-toggle":"tooltip","data-placement":"bottom"};return e||i(d,"#difficult-words-upsell-modal","difficult_words"),o(u,d,l)}function h(e){var t="";return e.learned()>0&&(t=o("a.button.only-img.speed-red",{href:e.speedUrl(),title:_t("Speed review"),"data-toggle":"tooltip","data-placement":"bottom"},[o("span.btn-img.img-clock")])),t}function g(e,t){if(!t.audio_mode()||0===t.learned())return"";var r=["button","only-img"],a="",n="";e?(r.push("purple"),n=t.audioReviewUrl(),a=_t("Practice your listening skills")):(n="#",r.push("purple"),a=_t("Learn more about audio review"));var s={href:n,title:a,"data-toggle":"tooltip","data-placement":"bottom","class":r.join(" ")};return e||i(s,"#listening-upsell-modal","listening_skills"),o("a",s,[o("span.btn-img.img-note")])}function f(e){var t=e.review()>0,r=e.reviewUrl(),a=t?_t("Review (__reviewNum__)",{reviewNum:e.review()}):_t("Review"),n="a.button"+(t?".blue":"");return o(n,{href:r,title:_t("Review words you've learned"),"data-toggle":"tooltip","data-placement":"bottom"},[o("span.text",a)])}function _(e){var t="";return e.isInProgress()&&(t=o("a.button.green",{href:e.learnUrl(),title:_t("Learn new words"),"data-toggle":"tooltip","data-placement":"bottom"},[o("span.text",_t("Learn"))])),t}function v(e,t){if(!t.video_mode()||0===t.learned()||!t.isInProgress())return"";var r=["button","only-img","teal"],a={href:e?t.meetTheNatives():"#",title:_t("mtn_button_altText"),"data-toggle":"tooltip","data-placement":"bottom","class":r.join(" ")};return e||i(a,"#mtn-upsell-modal","meet_the_natives"),o("a",a,[o("span.btn-img.img-person")])}function b(e,t){var r="";if(t.proChats().length>0){var a=["button","only-img","yellow","btn-left"],r={href:"#",title:_t("chatbot_button_hover_description"),"data-toggle":"tooltip","data-placement":"bottom","class":a.join(" ")};e?r.onclick=function(){s(t,!1)}:i(r,"#chat-upsell-modal","pro_chat")}return o("a",r,[o("span.btn-img.img-balloon")])}function w(e,t){var r="";if(t.grammarChats().length>0){var a=["button","only-img","purple-chat","btn-left"],r={href:"#",title:_t("chat_card_grammabot_description"),"data-toggle":"tooltip","data-placement":"bottom","class":a.join(" ")};e?r.onclick=function(){s(t,!0)}:i(r,"#grammarbot-upsell-modal","grammar")}return o("a",r,[o("span.btn-img.img-feather")])}function y(e){function r(){e.hideGoal(!e.hideGoal())}var a=e.course(),n=a.goal(),s=e.hideGoal()?".inactive":".active";return a.isGoalSet()&&!a.isGoalAchieved()?o("span.simple-btn.goal-setter-btn"+s,{title:_t("Goal setter lets you set learning targets")},[o("span.onoff",{onclick:r},[_t("Today: "),o("span.pts",[o("span.orange",[n.points]),_t(" / __goal__ pts",{goal:n.goal})])])]):a.isGoalSet()&&a.isGoalAchieved()?o("span.simple-btn.goal-setter-btn.done"+s,{title:_t("Goal setter lets you set learning targets")},[o("span.onoff",{onclick:r},_t("Goal complete!"))]):o("span.simple-btn.goal-setter-btn.inactive",{onclick:function(){t.goal_setter.goals[a.id()].showPopup()},title:_t("Goal setter lets you set learning targets")},[o("span.onoff",_t("Set a daily goal"))])}function k(e){return 1500===e?5:6e3===e?15:45}function C(e){return 1500===e?".first":6e3===e?".second":".third"}function x(e,t,n){for(var s=r.range(0,7).concat(r.range(0,7)).map(function(e){return a.getWeekdayName(e,1)}),i=[],l=[],u=Math.min(n?t:t+1,7)-1,d=(e+7-u)%7;u>=0;){var c=s[d];0===u?n?i.push(o("span.streak-bubble.complete",[o("span",c)])):l.push(o("span.streak-bubble.current",[o("span",c)])):i.push(o("span.streak-bubble.complete",[o("span",c)])),d++,u--}for(var p=n?7-i.length:6-i.length,m=0;p>m;m++)l.push(o("span.streak-bubble.incomplete",[o("span",s[d+m])]));return[o("span.complete",i),l]}function S(e,r,a){var n=Math.min(parseInt(a.points/a.goal*100),100);if(!(r>=0&&7>r))throw"expecting day to be a value between 0 and 6";return o(".goal-setter",[o(".streak-edit",[o(".level"+C(a.goal)),o(".duration",_t("__duration__ mins a day",{duration:k(a.goal)})),o("span.simple-btn.edit-goal-btn",{onclick:function(){t.goal_setter.goals[e].showPopup()},title:_t("Adjust your goal")},[o("span",_t("Edit goal"))])]),o(".streak-row",[o(".streak",[o(".streak-bubbles",x(r,a.streak,100===n))]),o(".streak-fake-btn",[o(".num",a.streak),o(".text",_t("streak"))])],o(".goal-setter-progress",[o(".bar",{style:"width: "+n+"%"})]))])}function T(e){o.post({url:"/ajax/courses/quit/",data:{course_id:e}}).then(function(){return t.dashboard.cardsComponent.removeCard(e)})}function M(e){var r={vm:{course:o.prop(e.course),currentFilter:o.prop(e.currentFilter),hideGoal:o.prop(!e.course.isGoalSet())},controller:function(){return{vm:r.vm,quitCourse:function(){var e=this.vm.course().id();t.modal.yes_no(_t("Quit this course"),t.trans.quitCourse,function(){T(e)})}}},view:function(e){var r,a=e.vm.course(),n=a.isInProgress(),s=n?["detail"]:["detail","wide"];return r=t.data.FEATURE_ENABLE_SCB?c(a,t.user.is_premium):d(a,t.user.is_premium),o(".course-card-container.js-course-card-container",{id:"course-"+a.id(),key:a.id()},[o(".course-progress-box",{},[o(".card-top",[o(".card-image-col",[o('a[href="'+a.url()+'"]',[o(".img-crop",[o('img.course-photo[src="'+a.photo()+'"]'),o('img.category-photo[src="'+a.category().photo+'"]')])])]),o(".card-main-container",[o(".top-main",[o(".wrapper",[o("div",{"class":s.join(" ")},[o('p.title[title="'+a.name()+'"]',[o('a[href="'+a.url()+'"]',a.name())])]),o(".pull-right",[n?y(e.vm):"",o('a[href="'+a.leaderboardUrl()+'"]',[o("span.simple-btn.leaderboard-btn",[o("span.leaderboard-icon")])]),l(e)]),u(a),a.isGoalSet()&&n&&!e.vm.hideGoal()?S(a.id(),t.data.day_of_the_week,a.goal()):""])])])]),a.num_things()-a.ignored()>0?o(".card-bottom",[o(".course-actions",r)]):""])])}};return r}return{widget:M,model:n}}},{}],2:[function(e,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=e(5),a=o(r);t.exports=function(t,o,r,n,s,i){function l(e,t){var o=t.options[t.selectedIndex],a=o.getAttribute("data-choice"),n=o.value,s=e.vm.currentFilter(),i=e.vm.currentCatId();(a!==s||n!==i)&&(t.disabled=!0,a===y&&(n=parseInt(n)),e.vm.isLoading(!0),e.resetCourses(),r.redraw(),v.fetchCourses(a,a===y?parseInt(n):null).then(function(){var o=h.getSavedFilter();o.courses_filter=a,e.vm.currentFilter(a),a===y&&(o.category_id=n,e.vm.currentCatId(n)),h.savedFilter(o),e.vm.widgets({}),e.vm.isLoading(!1),t.disabled=!1}))}function u(e){var t,a,i,u,d=e.vm.currentFilter(),c=e.vm.currentCatId(),p=e.vm.categories(),m=e.vm.isReviewNumsLoaded(c);switch(d){case x:t=S[C];break;case y:var h=n.find(p,function(e){return e.id===c});u=m?o.data.cat_review_nums[c]:e.vm.toReviewTotal(),void 0===h&&(localStorage.removeItem(g),window.location.reload()),t=h.name,u>0&&(a=s("/garden/review/%s/",h.slug),i=" "+_t("Review (__reviewNum__)",{reviewNum:u}));break;default:t=S[d]}var f=r(".courses-filter-container",[r(".left",[r(".title-container",[r("h1.title",t)])]),r(".right",[d===k?r("a.button.green.capped",{href:"/course/create/"},_t("Create course")):"",a?r("a.button.blue",{href:a},i):"",r(".select-container",[r("select.courses-filter",{name:"courses-filter",title:_t("Filter your page content"),onchange:function(t){var o=t.target;l(e,o)}},n.map(S,function(e,t){var a;if(t===x){var i={"data-choice":C,value:C,disabled:"disabled"};d===t&&(i.selected=!0),a=r("option",i,e)}else if(t===y)a=r("optgroup",{label:e},n.map(p,function(e){var t,a=e.id,n={"data-choice":y,value:a},i=m?o.data.cat_review_nums[a]:0;return d===y&&c===a?(n.selected=!0,t=e.name):t=i>0?s("%s (%d)",e.name,i):e.name,r("option",n,t)}));else{var i={"data-choice":t,value:t};d===t&&(i.selected=!0),a=r("option",i,e)}return a}))])])]);return f}function d(e){var t=e.vm.coursesOrder().length>0?1:2,o=n.map(n.range(0,t),function(){return r(".loading-item",[r(".loading-animation",[r(".background-masker.title-separator"),r(".background-masker.image-right"),r(".background-masker.image-bottom"),r(".background-masker.stats-top"),r(".background-masker.stats-left"),r(".background-masker.progress-top"),r(".background-masker.progress-bottom")])])});return r(".loading-wrapper",o)}function c(e){var t=e.vm,r=t.courses(),a=t.currentFilter(),s=t.widgets();return n.map(t.coursesOrder(),function(e){var t=r[e];return o.goal_setter.goals[e]=new o.Goal(e,t.photo(),t.name(),t.goal()||{},!1,!1),void 0===s[e]&&(s[e]=b({course:t,currentFilter:a})),s[e]})}function p(e){var t=[],o={};return e.forEach(function(e){o[e.id]=new w(e),t.push(e.id)}),[o,t]}function m(e,o){o||t('*[data-toggle="tooltip"]').tooltip({container:"body"})}function h(e){var a=parseInt(e.category_id),s=e.courses_filter,i={vm:{isLoading:r.prop(!0),isReviewNumsLoaded:function(e){return e&&n.has(o.data.cat_review_nums,e)},courses:r.prop({}),toReviewTotal:r.prop(0),coursesOrder:r.prop([]),widgets:r.prop({}),currentFilter:r.prop(s),categories:r.prop(e.learning_categories),currentCatId:r.prop(isNaN(a)?null:a),hasMoreCourses:r.prop(!0)},controller:function(){var e={$window:t(window),vm:i.vm,setGoal:function(e,t){var o=this.vm.courses()[e];o.goal(t),this.vm.widgets()[e].vm.hideGoal(!o.isGoalSet())},removeCard:function(e){delete this.vm.courses()[e],this.vm.coursesOrder(n.without(this.vm.coursesOrder(),e)),0===n.size(this.vm.courses())&&(this.vm.currentFilter()===y&&localStorage.removeItem(g),window.location.reload())},setCourses:function(e,t){var o=p(e);this.vm.courses(n.assign(this.vm.courses(),o[0])),this.vm.coursesOrder(this.vm.coursesOrder().concat(o[1])),this.vm.isLoading(!1),this.vm.hasMoreCourses(t)},resetCourses:function(){this.vm.courses({}),this.vm.coursesOrder([]),this.vm.hasMoreCourses(!0)},setToReviewTotal:function(e){this.vm.toReviewTotal(e)},loadMoreCourses:function(){r.startComputation(),this.vm.isLoading(!0),r.endComputation();var e=this.vm.currentFilter(),t=n.size(this.vm.courses()),o=t>=f?2*f:f;v.fetchCourses(e,e===y?this.vm.currentCatId():null,t,o)},onScroll:function(){var e=this.vm.coursesOrder().length;if(!(1>e||!this.vm.hasMoreCourses()||this.vm.isLoading())){var o=t("#course-"+this.vm.coursesOrder()[e-1]),r=o.offset();if(r){var a=this.$window.scrollTop()+this.$window.height();r.top<a&&this.loadMoreCourses()}}}};return e.$window.on("scroll",n.throttle(e.onScroll.bind(e),500)),e},view:function(e){var t=c(e),o=u(e),a=r("div",{config:m},e.vm.isLoading()?t.concat(d(e)):t);return[o,a]}};return i}var g="dashboard_filter",f=4,_=e(1)(t,o,r,n,i),v=e(4)(t,o,r,n),b=_.widget,w=_.model,y="learning",k="teaching",C="most_recent",x="initial",S={initial:_t("Filter Results"),with_goal:_t("With Goal Set"),most_recent:_t("Recently Learned"),teaching:_t("Teaching"),learning:_t("By Category")};return h.getSavedFilter=function(){var e=JSON.parse(localStorage.getItem(g));return(null===e||void 0===e.courses_filter)&&(e=1===o.data.learning_categories.length?{courses_filter:"learning",category_id:o.data.learning_categories[0].id}:{courses_filter:"initial"}),e.learning_categories=o.data.learning_categories,h.savedFilter(e),e},h.savedFilter=function(e){localStorage.setItem(g,a.default(e))},h}},{1:1,4:4,5:5}],3:[function(e){"use strict";!function(t,o,r,a,n,s,i){o.has(a,"dashboard")||(a.dashboard={}),a.dashboard.CourseProgressFetcher=function(){a.data.cat_review_nums={};var t=e(2)(r,a,n,o,s,i),l=e(4)(r,a,n,o),u=t.getSavedFilter(),d=r(".js-course-cards-component")[0],c=t(u);a.dashboard.cardsComponent=n.mount(d,c),l.fetchCourses(u.courses_filter,u.category_id).then(n.endComputation)}}(Class,_,jQuery,MEMRISE,m,sprintf,datetime)},{2:2,4:4}],4:[function(e,t){"use strict";t.exports=function(e,t,o,r){return{fetchCourses:function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;"initial"===e&&(e="most_recent");var i={courses_filter:e,offset:n,limit:s,get_review_count:"learning"===e&&!r.has(t.data.cat_review_nums,a)&&null!==a};return a&&(i.category_id=a),o.request({url:"/ajax/courses/dashboard/",data:i}).then(function(e){a&&i.get_review_count&&(t.data.cat_review_nums[a]=e.to_review_total),t.dashboard.cardsComponent.setToReviewTotal(e.to_review_total),t.dashboard.cardsComponent.setCourses(e.courses,e.has_more_courses)})}}}},{}],5:[function(e,t){t.exports={"default":e(6),__esModule:!0}},{6:6}],6:[function(e,t){var o=e(7),r=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(){return r.stringify.apply(r,arguments)}},{7:7}],7:[function(e,t){var o=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=o)},{}]},{},[3]),function t(e,o,r){function a(s,i){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){var o=e[s][1][t];return a(o?o:t)},d,d.exports,t,e,o,r)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(e,t){t.exports=function(e){var t=function(e){return{view:function(e){var t=moment.duration(e.timeTillMidnight(),"seconds");return m(".sidebar-box.goal-countdown",[m(".countdown-header",[m("span.header-img-container",m("span.header-img")),m("span.header-text",_t("Streak Clock"))]),m(".countdown-body",[m("span.countdown-text",_t("Time left to complete your daily goals")),m("span.countdown-duration",[m("span.time-block",[m("span.time-num",t.get("hours")),m("span.time-text",_t("hours"))]),m("span.time-block",[m("span.time-num",t.get("minutes")),m("span.time-text",_t("mins"))])])]),m(".sidebar-main-btn",m('a.simple[href="/settings/"]',_t("Change timezone")))])},controller:function(){this.timeTillMidnight=m.prop(e)}}};e.renderer.ready(function(){var o=document.getElementById("m-sidebar-goal-countdown");if(null!==o)var r=m.mount(o,new t(e.data.time_till_midnight)),a=setInterval(function(){var e=r.timeTillMidnight();0>=e?clearInterval(a):r.timeTillMidnight(e-60),m.redraw()},6e4)})}},{}],2:[function(e,t){t.exports=function(e,t,o,r){var a=r("#m-sidebar-leaderboard"),n=t.newLeaderboard({endPoint:"/ajax/leaderboard/mempals/",fullBoardUrl:"/home/leaderboard/",howMany:5});t.renderer.ready(function(){a.length>0&&o.mount(a[0],n)})}},{}],3:[function(e,t){t.exports=function(e){var t=e(".sidebar-profile .content-stats"),o=e(".js-num",t),r=e(".js-placeholder",t),a=o.css("font-size").replace("px","");e.each(o,function(){for(var t=e(this);t.width()>t.parent().width();)a--,o.css("font-size",a+"px")}),r.hide(),o.show()}},{}],4:[function(e,t){t.exports=function(e,t,o,r){"use strict";function a(){var e="#",t="premium-upsell-btn",r=_t("dashboard_module_stats_button"),a={href:e,"class":t},n=$("#stats-upsell-modal");a.onclick=function(){n&&n.modal("show")};var s=o(".sidebar-main-btn.premium-link",o("a",a,r));return[o(".sidebar-box.sidebar-premium",o(".premium-header",[o("span.premium-image"),o("span.premium-text",_t("dashboard_module_stats_header"))]),o("span.premium-stats-image"),s)]}function n(t){if(void 0!==t){for(var a=u.analytics_url(),n=_t("More"),d="simple",c=7,p=30,m=[],h=[],g=1,f=!0,_=!0,v=new Date,b=l(v),w=i(t.streak_data),y=0;p>y;y++){var k=void 0===t.streak_data[b]?0:t.streak_data[b],C=v.getDay(),x=r.getWeekdayName(C),S=v.getDate(),T=r.getMonthName(v.getMonth()),M=_t("__events__ events on __day__ __num__, __month__",{events:k,day:x,num:S,month:T}),I="";k>w[0]?I="high":k>w[1]?I="average":k>0&&(I="low");var O=o("span.cell",{"data-date":b,"data-events":k,title:M,"class":I});h.unshift({dayOfWeek:C,content:O}),v.setDate(S-1),b=l(v)}var F=[],j=[];for(f&&7===c&&m.push(s(g));e.size(h);){var E=h.shift();if(E.dayOfWeek!==g)F.push(E.content);else{for(;e.size(F)<c;){var N=o("span.cell.empty");F.unshift(N)}j=[o(".cellWrapper",F)],m.push(j),F=[E.content]}}return m.push([o(".cellWrapper",F)]),[o(".sidebar-box.sidebar-premium",o(".premium-header",[o("span.premium-image"),o("span.premium-text",_t("Pro"))]),o(".premium-content",[o(".text",_t("This month's learning graph")),o("a.monthlyStreak",{href:a,"class":_?"horizontal":""},m),o("p.text",_t("Best streak")),o("p.emphasized",_t("__streak__ days",{streak:t.longest_streak})),o("p.text",_t("Last 7 days")),o("p.emphasized",t.time_spent)]),o(".sidebar-main-btn.premium-link",o("a",{href:a,"class":d},n)))]}}function s(e){for(var t=[],a=0;7>a;a++){var n=e+a,s=n>6?0:n,i=o("span.cell.dayInitial",r.getWeekdayName(s,!0));t.push(i)}return[o(".cellWrapper",t)]}function i(t){if(!e.size(t))return[0,0];var o=e.values(t),r=e.max(o),a=Math.round(.75*r),n=Math.round(.5*r);return[a,n]}function l(t){var o=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),a=t.getDate().toString();return e.size(r)<2&&(r="0"+r),e.size(a)<2&&(a="0"+a),[o+"-"+r+"-"+a]}var u={};u.analytics_url=o.prop("/home/learning-statistics/"),u.premium_url=o.prop("/premium/?source=dashboard"),u.view=function(e){var o=e.stats();return t.user.is_premium?n(o):a(o)},u.controller=function(){return{stats:o.request({method:"GET",url:"/ajax/metrics/dashboard_sidebar_stats/"})}},t.renderer.ready(function(){var e=document.getElementById("m-sidebar-premium");null!==e&&o.mount(e,u)})}},{}],5:[function(e){!function(t,o,r,a){e(2)(t,o,r,a,Handlebars),e(4)(t,o,r,datetime),e(3)(a),e(1)(o),e(6)(a,"dashboard"),a(document).ready(function(){a('*[data-toggle="tooltip"]').tooltip()})}(_,MEMRISE,m,jQuery)},{1:1,2:2,3:3,4:4,6:6}],6:[function(e,t){t.exports=function(e,t){var o=e("#promotion-modal");o&&(o.on("show.bs.modal",function(){var e=o.data("tracking-name");analytics.track("upsell_viewed",{upsell_name:e,source:t})}),o.modal("show"))}},{}]},{},[5]),function(e,t,o,r){"use strict";t.has(r,"dashboard")||(r.dashboard={}),r.dashboard.UnenrollingManager=e.create({initialize:function(){this.start_observing()},start_observing:function(){this.on_unenrolled=t.bind(this.on_unenrolled,this),t(r.courses).on("unenrolled",this.on_unenrolled)},on_unenrolled:function(e){var t=o('[data-course-id="'+e+'"]');t.find("[title]").tooltip("destroy"),t.slideUp(function(){o(this).remove()})}})}(Class,_,jQuery,MEMRISE),function(e,t,o){"use strict";var r=[1500,6e3,2e4];t.Goal=function(n,s,i,l,u,d){var c=this;this.course_id=n,this.img_url=s,this.course_name=i,this.header_text=d,this.data=l,this.course_complete=u,this.active=!o.isEmpty(l),this.showPopup=function(){t.modal.content({modalId:"goal-setter-popup",showHeader:!1,showFooter:!1,backdrop:!0,keyboard:!0,template:"goal-setter",seeThru:!1,removeOnHidden:!0,templateVars:{course_id:c.course_id,img_url:c.img_url,course_name:c.course_name,header_text:c.header_text?c.header_text:_t("Set a daily goal - hit your goal every day to win bonuses!")}},function(){switch(c.data.goal){case r[0]:e(".first").addClass("active");break;case r[1]:e(".second").addClass("active");break;case r[2]:e(".third").addClass("active")}e(".goal-choice").on("click",function(){var t=e(this),o=t.dataAttr("level");e(".goal-choice").removeClass("active"),e(".dot").removeClass("active"),t.addClass("active"),e(".dot",t).addClass("active"),c.data.goal=r[o],c.save(),t.find(".main-text").first().text("Saved!").css("color","rgb(255, 117, 107)")}),o.has(t,"garden")&&(t.garden.session_params.shown_goal_setter=!0)},this.hiddenCallback)},this.hidePopup=function(r){"dashboard"===a.context&&t.dashboard.cardsComponent.setGoal(this.course_id,this.data),e("#goal-setter-popup").fadeOut(400,function(){e(this).remove(),e(".modal-backdrop").remove(),o.isFunction(r)&&r()})},this.off=function(){var t=this;m.startComputation(),e.ajax({url:"/ajax/course/daily-goal/",type:"POST",data:{course_id:t.course_id},success:function(){t.active=!1,t.data.points=0,t.data.goal=0,t.data.streak=0,t.hidePopup("during-session"===a.context?t.redirectHome:t.render),m.endComputation()}})},this.save=function(){var t=this,o={course_id:t.course_id,daily_goal:t.data.goal};m.startComputation(),e.ajax({url:"/ajax/course/daily-goal/",type:"POST",data:o,success:function(e){"undefined"==typeof t.data.points&&(t.data.points=0),"undefined"==typeof t.data.goal&&(t.data.goal=0),t.active=t.data.goal>0,t.data.goal_achieved=e.goal_achieved,t.data.streak=e.streak,t.hidePopup("during-session"===a.context?t.redirectHome:"end-session"===a.context?function(){t.render(),a.animate_bar(t.course_id)}:t.render),m.endComputation()}})},this.redirectHome=function(){window.onbeforeunload=null,window.location.href="/home"},this.render=function(){if("end-session"===a.context){var o=e(".course_box .bottom"),r=e(".upper",o),n=e(".progress",o),s=e(".text",r),i=e(".course_points",r),l=e(".edit",r),d=e(".bar",n);if(c.active){if(o.addClass("goal-setter-shadow"),0===t.garden.session_data.initial_session_points&&(r.add(n).add(d).show(),t.goal_setter.animate_bar(t.garden.session_params.course_id)),u){var p=_t("Course completed!");s.text(p),r.addClass("center"),i.add(l).remove()}else if(c.data.goal_achieved){var p=_t("Today's goal complete!");c.data.streak>0&&(p+="<span class='streak_info'>",p+=plural(_t("Current streak: %(count)d day"),_t("Current streak: %(count)d days"),c.data.streak),p+="</span>"),s.html(p),r.addClass("done"),i.add(l).remove()}else{var m=e(".pts",o),h=e(".goal",o),p=_t("Today's goal:");s.text(p),m.text(c.data.points),h.text(c.data.goal)}(u||c.data.goal_achieved)&&t.garden.session_data.session.goal_points>=c.data.points&&d.addClass("notrans")}else r.add(n).hide()}}};var a=t.goal_setter={};e.extend(!0,t.goal_setter,{goals:{},init:function(e){a.context=e,a.registerEvents()},initFireworks:function(){t.fireworks.init();var o="<div class='fireworks-close-btn js-close-fireworks'>x</div>";e("body").append(o),e(".js-close-fireworks").fadeIn(2e3).on("click",function(){t.fireworks.closeFireworks()})},animate_bar:function(r){if("undefined"!=typeof t.garden.session_data.session.goal_points){var a=this.goals[r].data,n=this.goals[r].course_complete,s=e(".course_box .bottom"),i=e(".bar",s),l=e(".sparkle",s);if((n||a.goal_achieved)&&t.garden.session_data.session.goal_points<a.goal)i.width("100%"),setTimeout(function(){o.include([2,4,5,10],a.streak)&&!t.user.is_premium?(t.shownGoalUpsell=!0,t.goal_setter.initFireworks(),setTimeout(function(){t.goal_setter.showPromoPopup(a.streak)},3e3)):(l.show(),s.addClass("bounce"))},2e3);else if(a.points>0&&a.goal>0){var u=a.points/a.goal*100,d=(u>100?100:u)+"%";i.width(d)}else i.hide()}},showPromoPopup:function(r){var a=o.include([2,4,5],r)?20:50,n=t.CONSTANTS.DISCOUNT_CODES[a],s=t.garden.getSessionType(),i="?offer="+n+"&upsell_name=streak_upgrade&source=eos&session_type="+s;t.modal.content({modalId:"end-session-promo-popup",showHeader:!1,showFooter:!1,backdrop:!1,keyboard:!0,template:"show-streak-promo",seeThru:!1,removeOnHidden:!0,templateVars:{url:"/premium/pay/annual/"+i,mainText:_t("Congratulations!"),percentage:a,subText:_t("You've hit a __numDay__ day goal streak!",{numDay:r})},shadow:!1,fadeTime:"slow"},function(){var o=e("#end-session-promo-popup");e(".skip",o).on("click",function(){t.fireworks.closeFireworks()}),e(".btn-promo",o).on("click",function(){})})},hideModal:function(){var t=e("#end-session-promo-popup");t.fadeOut(400,function(){t.remove()})},registerEvents:function(){var o=e(document);if("dashboard"===a.context)o.on("click",".turn-off",function(){var t=e(this).data("target");a.goals[t].off()});else if("end-session"===a.context){var r=t.garden.session_params.course_id;o.on("click",".edit",function(){a.goals[r].showPopup()}),o.on("click",".turn-off",function(){a.goals[r].off()}),0===t.garden.session_data.initial_session_points&&e(".end_of_session .next_btn").on("click",function(){a.goals[r].showPopup()})}else if("during-session"===a.context){var r=t.garden.session_params.course_id;t.garden.session_params.shown_goal_setter=!1,0===t.garden.session_data.initial_session_points&&(o.on("click",".session-exit",function(){return t.garden.session_params.shown_goal_setter?void 0:(a.goals[r].hiddenCallback=function(){window.location.href="/home"},a.goals[r].showPopup(),!1)}),o.on("click",".turn-off",function(){a.goals[r].off()}))}}})}(jQuery,MEMRISE,_);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJjb3Vyc2UtcHJvZ3Jlc3MtZmV0Y2hlci5qcyIsInNpZGViYXIuanMiLCJ1bmVucm9sbGluZy1tYW5hZ2VyLmpzIiwiZ29hbC1zZXR0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLFlBRUEsR0FBQSxJQUFBLEVBQUEsZUFDQSxFQUFBLGNBR0EsRUFBQSxVQUFBLGNBQUEsRUFBQSxRQUVBLFdBQUEsV0FFQSxFQUFBLEtBQUEsa0JBQ0EsS0FBQSx3QkFBQSxHQUFBLEdBQUEsVUFBQSxzQkFDQSxLQUFBLG9CQUFBLEdBQUEsR0FBQSxVQUFBLG1CQUNBLEVBQUEsWUFBQSxLQUFBLGNBR0EsRUFBQSwrQkFBQSxXQUdBLG1CQUFBLFdBRUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsU0FBQSxTQUNBLEVBQUEsRUFBQSxrQkFDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsSUFBQSxFQUVBLEdBQUEsUUFBQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLFNBQUEsT0FBQSxZQUFBLE9BQUEsYUFDQSxTQUFBLGlCQUFBLFNBQUEsS0FBQSxZQUFBLFNBQUEsTUFBQSxTQUVBLEdBQUEsSUFBQSxNQUFBLEdBQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxJQUFBLE1BQUEsR0FBQSxFQUFBLEVBQUEsV0FLQSxFQUFBLFNBQUEsTUFBQSxXQUNBLEVBQUEsS0FBQSxHQUFBLEdBQUEsVUFBQSxjQUNBLEVBQUEsS0FBQSx3QkFHQSxNQUFBLEVBQUEsT0FBQSxTQzVDQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsT0FBQSxLQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsR0FBQSxHQUFBLE9BQUEsdUJBQUEsRUFBQSxJQUFBLE1BQUEsR0FBQSxLQUFBLG1CQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxXQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxRQUFBLFNBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxPQUFBLEtBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxZQUVBLEdBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxRQUFBLEdBQUEsR0FDQSxLQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsWUFDQSxLQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsWUFDQSxLQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsSUFDQSxLQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsTUFDQSxLQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsT0FDQSxLQUFBLGlCQUFBLEVBQUEsS0FBQSxFQUFBLGtCQUFBLEdBQ0EsS0FBQSxRQUFBLEVBQUEsS0FBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsWUFDQSxLQUFBLFFBQUEsRUFBQSxLQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxVQUNBLEtBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsWUFBQSxJQUVBLEtBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEtBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLEtBQUEsRUFBQSxXQUFBLEdBQ0EsS0FBQSxPQUFBLEVBQUEsS0FBQSxLQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsTUFDQSxLQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxpQkFDQSxLQUFBLFVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSwwQkFDQSxLQUFBLGVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSw0QkFDQSxLQUFBLGFBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSwyQkFDQSxLQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSx3QkFDQSxLQUFBLGVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSw0QkFFQSxLQUFBLGVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxlQUVBLEtBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxlQUNBLEtBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxtQkFFQSxLQUFBLFVBQUEsV0FDQSxNQUFBLE1BQUEsUUFBQSxLQUFBLE9BQUEsS0FBQSxHQUdBLEtBQUEsZUFBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLE1BQ0EsT0FBQSxHQUFBLFFBQUEsRUFBQSxNQUdBLEtBQUEsYUFBQSxXQUNBLE1BQUEsTUFBQSxtQkFBQSxLQUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FFQSxHQUFBLE1BQUEsU0FDQSxRQUFBLHNCQUNBLFNBQUEsZ0JBQ0EsYUFBQSxFQUNBLFNBQUEsU0FDQSxTQUFBLEVBQ0EsZ0JBQUEsRUFDQSxjQUNBLFNBQUEsRUFBQSxXQUNBLGFBQUEsRUFBQSxlQUNBLGVBQUEsRUFBQSxXQUNBLGVBQUEsSUFFQSxXQUNBLEVBQUEsU0FBQSxjQUNBLFdBQ0EsRUFBQSxZQUFBLGVBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLGtCQUFBLEtBQUEsT0FBQSxFQUFBLElBQ0EsRUFBQSxRQUFBLFdBQ0EsSUFDQSxFQUFBLE1BQUEsUUFDQSxzQkFBQSxHQUNBLFFBQUEsY0FBQSxZQUFBLElBQUEsTUFBQSxXQUNBLEtBQUEsV0FPQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFFBQ0EsT0FBQSxHQUFBLGlCQUFBLEVBQUEsYUFBQSxFQUFBLGNBQUEsRUFBQSxNQUFBLEVBQUEsZ0JBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxnQkFBQSxHQUFBLHNCQUFBLEVBQUEsTUFBQSxFQUFBLGdCQUNBLFFBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQ0EsRUFBQSxRQUFBLG1CQUFBLEVBQUEsRUFBQSxVQUVBLEtBQUEsSUFDQSxXQUFBLEVBQUEsTUFDQSxhQUFBLEVBQUEsT0FDQSxlQUFBLEVBQUEsUUFDQSxtQkFBQSxFQUFBLGNBQ0EsZUFBQSxHQUFBLHFFQUVBLEVBQUEsa0JBQUEsR0FBQSwwQkFBQSxhQUFBLEVBQUEsR0FBQSxnQkFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLG1CQUNBLFFBQUEsV0FDQSxFQUFBLGdCQUVBLEVBQUEsbUJBQUEsR0FBQSx1QkFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxlQUNBLEVBQUEsR0FBQSxVQUFBLFFBQUEsT0FFQSxPQUFBLEdBQUEsWUFBQSxFQUFBLG9CQUFBLEVBQUEsT0FDQSxRQUFBLEVBQUEsS0FBQSxPQUNBLEVBQUEsT0FBQSxHQUFBLHVDQUNBLFFBQUEsRUFBQSxVQUNBLElBQUEsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLDJCQUFBLEVBQUEsaUJBQUEsTUFBQSxVQUFBLEVBQUEsbUJBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsNEJBQUEsMEJBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFFQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsS0FDQSxRQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSwwQkFBQSxFQUFBLGlDQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsWUFDQSxHQUFBLFVBQ0EsRUFBQSxHQUNBLEVBQUEsR0FDQSxHQUFBLEVBQUEseUJBQUEsRUFBQSxZQUFBLElBQ0EsRUFBQSxHQU9BLEdBQ0EsR0FDQSxFQUFBLEdBQUEsK0JBQ0EsRUFBQSxLQUFBLFNBQUEsZ0JBQ0EsRUFBQSxFQUFBLGlCQUVBLEVBQUEsR0FBQSxnQ0FDQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLFdBQUEsa0JBR0EsRUFBQSxHQUFBLHVDQUNBLEVBQUEsSUFDQSxFQUFBLEtBQUEsU0FBQSxnQkFHQSxJQUFBLElBQ0EsTUFBQSxFQUNBLEtBQUEsRUFDQSxRQUFBLEVBQUEsS0FBQSxLQUNBLGNBQUEsVUFDQSxpQkFBQSxTQU9BLE9BSkEsSUFDQSxFQUFBLEVBQUEsZ0NBQUEsbUJBR0EsRUFBQSxFQUFBLEVBQUEsR0FHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFXQSxPQVRBLEdBQUEsVUFBQSxJQUNBLEVBQUEsRUFBQSwrQkFDQSxLQUFBLEVBQUEsV0FDQSxNQUFBLEdBQUEsZ0JBQ0EsY0FBQSxVQUNBLGlCQUFBLFdBQ0EsRUFBQSw2QkFHQSxFQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLGNBQUEsSUFBQSxFQUFBLFVBQ0EsTUFBQSxFQUdBLElBQUEsSUFBQSxTQUFBLFlBQ0EsRUFBQSxHQUNBLEVBQUEsRUFFQSxJQUNBLEVBQUEsS0FBQSxVQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEdBQUEsb0NBRUEsRUFBQSxJQUNBLEVBQUEsS0FBQSxVQUNBLEVBQUEsR0FBQSxpQ0FHQSxJQUFBLElBQ0EsS0FBQSxFQUNBLE1BQUEsRUFDQSxjQUFBLFVBQ0EsaUJBQUEsU0FDQSxRQUFBLEVBQUEsS0FBQSxLQU9BLE9BSkEsSUFDQSxFQUFBLEVBQUEsMEJBQUEsb0JBR0EsRUFBQSxJQUFBLEdBQUEsRUFBQSwyQkFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLEdBQUEsMEJBQUEsVUFBQSxFQUFBLFdBQUEsR0FBQSxVQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsR0FFQSxPQUFBLEdBQUEsR0FDQSxLQUFBLEVBQ0EsTUFBQSxHQUFBLCtCQUNBLGNBQUEsVUFDQSxpQkFBQSxXQUNBLEVBQUEsWUFBQSxLQUdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQVdBLE9BVEEsR0FBQSxpQkFDQSxFQUFBLEVBQUEsa0JBQ0EsS0FBQSxFQUFBLFdBQ0EsTUFBQSxHQUFBLG1CQUNBLGNBQUEsVUFDQSxpQkFBQSxXQUNBLEVBQUEsWUFBQSxHQUFBLGFBR0EsRUFHQSxRQUFBLEdBQUEsRUFBQSxHQUVBLElBQUEsRUFBQSxjQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsZUFDQSxNQUFBLEVBR0EsSUFBQSxJQUFBLFNBQUEsV0FBQSxRQUNBLEdBQ0EsS0FBQSxFQUFBLEVBQUEsaUJBQUEsSUFDQSxNQUFBLEdBQUEsc0JBQ0EsY0FBQSxVQUNBLGlCQUFBLFNBQ0EsUUFBQSxFQUFBLEtBQUEsS0FPQSxPQUpBLElBQ0EsRUFBQSxFQUFBLG9CQUFBLG9CQUdBLEVBQUEsSUFBQSxHQUFBLEVBQUEsNkJBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFFQSxJQUFBLEVBQUEsV0FBQSxPQUFBLEVBQUEsQ0FDQSxHQUFBLElBQUEsU0FBQSxXQUFBLFNBQUEsWUFDQSxHQUNBLEtBQUEsSUFDQSxNQUFBLEdBQUEsb0NBQ0EsY0FBQSxVQUNBLGlCQUFBLFNBQ0EsUUFBQSxFQUFBLEtBQUEsS0FHQSxHQUdBLEVBQUEsUUFBQSxXQUNBLEVBQUEsR0FBQSxJQUhBLEVBQUEsRUFBQSxxQkFBQSxZQVFBLE1BQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSw4QkFHQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUVBLElBQUEsRUFBQSxlQUFBLE9BQUEsRUFBQSxDQUNBLEdBQUEsSUFBQSxTQUFBLFdBQUEsY0FBQSxZQUNBLEdBQ0EsS0FBQSxJQUNBLE1BQUEsR0FBQSxtQ0FDQSxjQUFBLFVBQ0EsaUJBQUEsU0FDQSxRQUFBLEVBQUEsS0FBQSxLQUdBLEdBR0EsRUFBQSxRQUFBLFdBQ0EsRUFBQSxHQUFBLElBSEEsRUFBQSxFQUFBLDJCQUFBLFdBUUEsTUFBQSxHQUFBLElBQUEsR0FBQSxFQUFBLDhCQUdBLFFBQUEsR0FBQSxHQUtBLFFBQUEsS0FDQSxFQUFBLFVBQUEsRUFBQSxZQUxBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLFdBQUEsWUFBQSxTQU1BLE9BQUEsR0FBQSxjQUFBLEVBQUEsaUJBQ0EsRUFBQSxrQ0FBQSxHQUNBLE1BQUEsR0FBQSwrQ0FDQSxFQUFBLGNBQUEsUUFBQSxJQUFBLEdBQUEsV0FBQSxFQUFBLFlBQUEsRUFBQSxlQUFBLEVBQUEsU0FBQSxHQUFBLG1CQUFBLEtBQUEsRUFBQSxhQUNBLEVBQUEsYUFBQSxFQUFBLGlCQUNBLEVBQUEsdUNBQUEsR0FDQSxNQUFBLEdBQUEsK0NBQ0EsRUFBQSxjQUFBLFFBQUEsR0FBQSxHQUFBLHFCQUVBLEVBQUEsNENBQ0EsUUFBQSxXQUNBLEVBQUEsWUFBQSxNQUFBLEVBQUEsTUFBQSxhQUVBLE1BQUEsR0FBQSwrQ0FDQSxFQUFBLGFBQUEsR0FBQSx1QkFJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFFBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxRQUFBLEVBQUEsU0FBQSxNQUFBLEVBQUEsVUFBQSxTQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FnQkEsSUFaQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLGVBQUEsRUFBQSxLQUVBLEtBQ0EsS0FJQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBR0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFHQSxLQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSwrQkFBQSxFQUFBLE9BQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSw4QkFBQSxFQUFBLE9BQUEsTUFFQSxFQUFBLEtBQUEsRUFBQSwrQkFBQSxFQUFBLE9BQUEsTUFHQSxJQUNBLElBS0EsSUFBQSxHQURBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLEVBQUEsaUNBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxNQUdBLFFBQUEsRUFBQSxnQkFBQSxHQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEtBQUEsSUFFQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSw2Q0FFQSxPQUFBLEdBQUEsZ0JBQUEsRUFBQSxnQkFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEdBQUEsMkJBQUEsU0FBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLGlDQUNBLFFBQUEsV0FDQSxFQUFBLFlBQUEsTUFBQSxHQUFBLGFBRUEsTUFBQSxHQUFBLHNCQUNBLEVBQUEsT0FBQSxHQUFBLGtCQUFBLEVBQUEsZUFBQSxFQUFBLFdBQUEsRUFBQSxrQkFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLE1BQUEsTUFBQSxFQUFBLG9CQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEdBQUEsY0FBQSxFQUFBLHlCQUFBLEVBQUEsUUFBQSxNQUFBLFVBQUEsRUFBQSxXQUdBLFFBQUEsR0FBQSxHQUNBLEVBQUEsTUFDQSxJQUFBLHNCQUNBLE1BQUEsVUFBQSxLQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsVUFBQSxlQUFBLFdBQUEsS0FLQSxRQUFBLEdBQUEsR0FDQSxHQUFBLElBQ0EsSUFDQSxPQUFBLEVBQUEsS0FBQSxFQUFBLFFBQ0EsY0FBQSxFQUFBLEtBQUEsRUFBQSxlQUNBLFNBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxjQUVBLFdBQUEsV0FDQSxPQUNBLEdBQUEsRUFBQSxHQUNBLFdBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxHQUFBLFNBQUEsSUFDQSxHQUFBLE1BQUEsT0FBQSxHQUFBLG9CQUFBLEVBQUEsTUFBQSxXQUFBLFdBQ0EsRUFBQSxRQUtBLEtBQUEsU0FBQSxHQUNBLEdBRUEsR0FGQSxFQUFBLEVBQUEsR0FBQSxTQUNBLEVBQUEsRUFBQSxlQUVBLEVBQUEsR0FBQSxXQUFBLFNBQUEsT0FRQSxPQUxBLEdBREEsRUFBQSxLQUFBLG1CQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsWUFFQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFlBR0EsRUFBQSxtREFDQSxHQUFBLFVBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxPQUNBLEVBQUEsMkJBQUEsRUFBQSxhQUFBLEVBQUEsbUJBQUEsRUFBQSxXQUFBLEVBQUEsTUFBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLHlCQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsMkJBQUEsRUFBQSxXQUFBLE1BQUEsWUFBQSxFQUFBLHdCQUFBLEVBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxPQUNBLFFBQUEsRUFBQSxLQUFBLE9BQ0EsRUFBQSxrQkFBQSxFQUFBLE9BQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxNQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEdBQUEsRUFBQSxXQUFBLEVBQUEsaUJBQUEsTUFBQSxFQUFBLG1DQUFBLEVBQUEsNkJBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLGFBQUEsSUFBQSxFQUFBLEdBQUEsV0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsZ0JBQUEsRUFBQSxRQUFBLFdBQUEsRUFBQSxhQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsZ0JBQUEsRUFBQSxrQkFBQSxLQUFBLFFBSUEsT0FBQSxHQUdBLE9BQUEsT0FBQSxFQUFBLE1BQUEsU0FHQSxHQUFBLFNBQUEsRUFBQSxHQUNBLFlBTUEsU0FBQSxHQUFBLEdBQUEsTUFBQSxJQUFBLEVBQUEsV0FBQSxHQUFBLFVBQUEsR0FKQSxHQUFBLEdBQUEsRUFBQSxHQUVBLEVBQUEsRUFBQSxFQUlBLEdBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQXlCQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFFBQUEsRUFBQSxlQUNBLEVBQUEsRUFBQSxhQUFBLGVBQ0EsRUFBQSxFQUFBLE1BRUEsRUFBQSxFQUFBLEdBQUEsZ0JBQ0EsRUFBQSxFQUFBLEdBQUEsZ0JBRUEsSUFBQSxHQUFBLElBQUEsS0FDQSxFQUFBLFVBQUEsRUFFQSxJQUFBLElBQ0EsRUFBQSxTQUFBLElBSUEsRUFBQSxHQUFBLFdBQUEsR0FDQSxFQUFBLGVBQ0EsRUFBQSxTQUNBLEVBQUEsYUFBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsZ0JBQ0EsR0FBQSxlQUFBLEVBQ0EsRUFBQSxHQUFBLGNBQUEsR0FDQSxJQUFBLElBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxHQUFBLGFBQUEsSUFFQSxFQUFBLFlBQUEsR0FHQSxFQUFBLEdBQUEsWUFDQSxFQUFBLEdBQUEsV0FBQSxHQUNBLEVBQUEsVUFBQSxLQUtBLFFBQUEsR0FBQSxHQUNBLEdBS0EsR0FBQSxFQUFBLEVBQUEsRUFMQSxFQUFBLEVBQUEsR0FBQSxnQkFDQSxFQUFBLEVBQUEsR0FBQSxlQUNBLEVBQUEsRUFBQSxHQUFBLGFBQ0EsRUFBQSxFQUFBLEdBQUEsbUJBQUEsRUFJQSxRQUFBLEdBRUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxFQUNBLE1BRUEsS0FBQSxHQUdBLEdBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsR0FHQSxHQUFBLEVBQUEsRUFBQSxLQUFBLGdCQUFBLEdBQUEsRUFBQSxHQUFBLGdCQUdBLFNBQUEsSUFDQSxhQUFBLFdBQUEsR0FDQSxPQUFBLFNBQUEsVUFHQSxFQUFBLEVBQUEsS0FFQSxFQUFBLElBQ0EsRUFBQSxFQUFBLHFCQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsR0FBQSwwQkFBQSxVQUFBLElBRUEsTUFDQSxTQUNBLEVBQUEsRUFBQSxHQUlBLEdBQUEsR0FBQSxFQUFBLDZCQUFBLEVBQUEsU0FBQSxFQUFBLG9CQUFBLEVBQUEsV0FBQSxPQUFBLEVBQUEsVUFBQSxJQUFBLEVBQUEsRUFBQSx5QkFBQSxLQUFBLG1CQUFBLEdBQUEsa0JBQUEsR0FBQSxFQUFBLEVBQUEsaUJBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLHFCQUFBLEVBQUEseUJBQ0EsS0FBQSxpQkFDQSxNQUFBLEdBQUEsNEJBQ0EsU0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxHQUFBLEVBQUEsS0FFQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsSUFBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLElBQUEsY0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLFdBRUEsS0FBQSxJQUFBLEVBQUEsVUFBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEVBQUEsT0FDQSxJQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsWUFBQSxNQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxHQUVBLEdBR0EsR0FIQSxFQUFBLEVBQUEsR0FDQSxHQUFBLGNBQUEsRUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxnQkFBQSxHQUFBLENBVUEsT0FQQSxLQUFBLEdBQUEsSUFBQSxHQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsRUFBQSxNQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEtBR0EsRUFBQSxTQUFBLEVBQUEsVUFFQSxDQUNBLEdBQUEsSUFBQSxjQUFBLEVBQUEsTUFBQSxFQUNBLEtBQUEsSUFDQSxFQUFBLFVBQUEsR0FFQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBR0EsTUFBQSxXQUdBLE9BQUEsR0FNQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxHQUFBLGVBQUEsT0FBQSxFQUFBLEVBQUEsRUFFQSxFQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLGlCQUFBLEVBQUEsc0JBQUEsRUFBQSxzQ0FBQSxFQUFBLGtDQUFBLEVBQUEsbUNBQUEsRUFBQSxnQ0FBQSxFQUFBLGlDQUFBLEVBQUEsbUNBQUEsRUFBQSwyQ0FHQSxPQUFBLEdBQUEsbUJBQUEsR0FRQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsU0FFQSxPQUFBLEdBQUEsSUFBQSxFQUFBLGVBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLEVBUUEsT0FOQSxHQUFBLFlBQUEsTUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLFlBQUEsR0FBQSxHQUVBLFNBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxjQUFBLEtBR0EsRUFBQSxLQU1BLFFBQUEsR0FBQSxHQUVBLEdBQUEsTUFDQSxJQUtBLE9BSkEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxPQUVBLEVBQUEsR0FHQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSw0QkFBQSxTQUFBLFVBQUEsU0FJQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsU0FBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLGVBRUEsR0FDQSxJQUNBLFVBQUEsRUFBQSxNQUFBLEdBQ0EsbUJBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUFBLGdCQUFBLElBRUEsUUFBQSxFQUFBLFNBQ0EsY0FBQSxFQUFBLEtBQUEsR0FDQSxhQUFBLEVBQUEsU0FDQSxRQUFBLEVBQUEsU0FDQSxjQUFBLEVBQUEsS0FBQSxHQUNBLFdBQUEsRUFBQSxLQUFBLEVBQUEscUJBQ0EsYUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsR0FHQSxlQUFBLEVBQUEsTUFBQSxJQUVBLFdBQUEsV0FDQSxHQUFBLElBQ0EsUUFBQSxFQUFBLFFBQ0EsR0FBQSxFQUFBLEdBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxHQUFBLFVBQUEsRUFDQSxHQUFBLEtBQUEsR0FDQSxLQUFBLEdBQUEsVUFBQSxHQUFBLEdBQUEsVUFBQSxFQUFBLGNBRUEsV0FBQSxTQUFBLFNBQ0EsTUFBQSxHQUFBLFVBQUEsR0FDQSxLQUFBLEdBQUEsYUFBQSxFQUFBLFFBQUEsS0FBQSxHQUFBLGVBQUEsSUFPQSxJQUFBLEVBQUEsS0FBQSxLQUFBLEdBQUEsYUFDQSxLQUFBLEdBQUEsa0JBQUEsR0FDQSxhQUFBLFdBQUEsR0FHQSxPQUFBLFNBQUEsV0FHQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxHQUFBLFFBQUEsRUFBQSxPQUFBLEtBQUEsR0FBQSxVQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsYUFBQSxLQUFBLEdBQUEsZUFBQSxPQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsV0FBQSxHQUNBLEtBQUEsR0FBQSxlQUFBLElBT0EsYUFBQSxXQUNBLEtBQUEsR0FBQSxZQUNBLEtBQUEsR0FBQSxpQkFDQSxLQUFBLEdBQUEsZ0JBQUEsSUFFQSxpQkFBQSxTQUFBLEdBQ0EsS0FBQSxHQUFBLGNBQUEsSUFFQSxnQkFBQSxXQUNBLEVBQUEsbUJBQ0EsS0FBQSxHQUFBLFdBQUEsR0FDQSxFQUFBLGdCQUVBLElBQUEsR0FBQSxLQUFBLEdBQUEsZ0JBQ0EsRUFBQSxFQUFBLEtBQUEsS0FBQSxHQUFBLFdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxhQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsR0FBQSxlQUFBLEtBQUEsRUFBQSxJQUVBLFNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxHQUFBLGVBQUEsTUFDQSxNQUFBLEVBQUEsSUFBQSxLQUFBLEdBQUEsa0JBQUEsS0FBQSxHQUFBLGFBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxXQUFBLEtBQUEsR0FBQSxlQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsUUFDQSxJQUFBLEVBQUEsQ0FFQSxHQUFBLEdBQUEsS0FBQSxRQUFBLFlBQUEsS0FBQSxRQUFBLFFBQ0EsR0FBQSxJQUFBLEdBQ0EsS0FBQSxxQkFPQSxPQUZBLEdBQUEsUUFBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUFBLEdBQUEsTUFFQSxHQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsT0FBQSxHQUNBLEVBQUEsR0FBQSxZQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFDQSxRQUFBLEVBQUEsSUFJQSxPQUFBLEdBdFRBLEdBQUEsR0FBQSxtQkFDQSxFQUFBLEVBRUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE1BRUEsRUFBQSxXQUNBLEVBQUEsV0FDQSxFQUFBLGNBRUEsRUFBQSxVQUNBLEdBQ0EsUUFBQSxHQUFBLGtCQUNBLFVBQUEsR0FBQSxpQkFDQSxZQUFBLEdBQUEsb0JBQ0EsU0FBQSxHQUFBLFlBQ0EsU0FBQSxHQUFBLGVBZ1VBLE9BMUJBLEdBQUEsZUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLE1BQUEsYUFBQSxRQUFBLEdBaUJBLFFBZkEsT0FBQSxHQUFBLFNBQUEsRUFBQSxrQkFHQSxFQURBLElBQUEsRUFBQSxLQUFBLG9CQUFBLFFBRUEsZUFBQSxXQUNBLFlBQUEsRUFBQSxLQUFBLG9CQUFBLEdBQUEsS0FHQSxlQUFBLFlBSUEsRUFBQSxvQkFBQSxFQUFBLEtBQUEsb0JBQ0EsRUFBQSxZQUFBLEdBRUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLGFBQUEsUUFBQSxFQUFBLEVBQUEsUUFBQSxLQUdBLEtBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsR0FBQSxTQUFBLEdBQ0EsY0FFQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBSUEsRUFBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLGNBRUEsRUFBQSxVQUFBLHNCQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUVBLElBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsaUJBQ0EsRUFBQSxFQUFBLDhCQUFBLEdBRUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxVQUFBLGVBQUEsRUFBQSxNQUFBLEVBQUEsR0FHQSxFQUFBLGFBQUEsRUFBQSxlQUFBLEVBQUEsYUFBQSxLQUFBLEVBQUEsa0JBRUEsTUFBQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQUEsWUFFQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsWUFFQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BQ0EsYUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsVUFBQSxPQUFBLEdBQUEsU0FBQSxVQUFBLEdBQUEsVUFBQSxHQUFBLEVBQ0EsRUFBQSxVQUFBLE9BQUEsR0FBQSxTQUFBLFVBQUEsR0FBQSxVQUFBLEdBQUEsQ0FFQSxhQUFBLElBQUEsRUFBQSxjQUVBLElBQUEsSUFDQSxlQUFBLEVBQ0EsT0FBQSxFQUNBLE1BQUEsRUFJQSxpQkFBQSxhQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxnQkFBQSxJQUFBLE9BQUEsRUFHQSxPQURBLEtBQUEsRUFBQSxZQUFBLEdBQ0EsRUFBQSxTQUNBLElBQUEsMkJBQ0EsS0FBQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxtQkFBQSxFQUFBLEtBQUEsZ0JBQUEsR0FBQSxFQUFBLGlCQUNBLEVBQUEsVUFBQSxlQUFBLGlCQUFBLEVBQUEsaUJBQ0EsRUFBQSxVQUFBLGVBQUEsV0FBQSxFQUFBLFFBQUEsRUFBQSw0QkFNQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxVQUFBLEVBQUEsR0FBQSxZQUFBLEtBQ0EsRUFBQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsVUFBQSxLQUFBLFdBQ0EsR0FBQSxRQUFBLFdBQ0EsTUFBQSxHQUFBLFVBQUEsTUFBQSxFQUFBLGNBR0EsRUFBQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxRQUFBLFFBQ0EsaUJBQUEsT0FBQSxJQUFBLGFBRUEsSUN4NEJBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxPQUFBLEtBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSx1QkFBQSxFQUFBLElBQUEsTUFBQSxHQUFBLEtBQUEsbUJBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLFdBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFFBQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsS0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FFQSxPQUNBLEtBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxPQUFBLFNBQUEsRUFBQSxtQkFBQSxVQUVBLE9BQUEsR0FBQSwrQkFDQSxFQUFBLHFCQUNBLEVBQUEsNEJBQUEsRUFBQSxvQkFDQSxFQUFBLG1CQUFBLEdBQUEsbUJBRUEsRUFBQSxtQkFDQSxFQUFBLHNCQUFBLEdBQUEsMkNBQ0EsRUFBQSwyQkFDQSxFQUFBLG1CQUNBLEVBQUEsZ0JBQUEsRUFBQSxJQUFBLFVBQ0EsRUFBQSxpQkFBQSxHQUFBLFlBRUEsRUFBQSxtQkFDQSxFQUFBLGdCQUFBLEVBQUEsSUFBQSxZQUNBLEVBQUEsaUJBQUEsR0FBQSxlQUlBLEVBQUEsb0JBQUEsRUFBQSw4QkFBQSxHQUFBLHdCQUdBLFdBQUEsV0FDQSxLQUFBLGlCQUFBLEVBQUEsS0FBQSxLQUtBLEdBQUEsU0FBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLFNBQUEsZUFBQSwyQkFDQSxJQUFBLE9BQUEsRUFDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxxQkFDQSxFQUFBLFlBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxrQkFDQSxJQUFBLEVBQUEsY0FBQSxHQUNBLEVBQUEsaUJBQUEsRUFBQSxJQUNBLEVBQUEsVUFDQSxhQUtBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSwwQkFDQSxFQUFBLEVBQUEsZ0JBQ0EsU0FBQSw2QkFDQSxhQUFBLHFCQUNBLFFBQUEsR0FHQSxHQUFBLFNBQUEsTUFBQSxXQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsV0FJQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsbUNBQ0EsRUFBQSxFQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsa0JBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxhQUFBLFFBQUEsS0FBQSxHQUVBLEdBQUEsS0FBQSxFQUFBLFdBRUEsSUFEQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsUUFBQSxFQUFBLFNBQUEsU0FDQSxJQUNBLEVBQUEsSUFBQSxZQUFBLEVBQUEsUUFJQSxFQUFBLE9BQ0EsRUFBQSxhQUdBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxZQW9CQSxTQUFBLEtBQ0EsR0FBQSxHQUFBLElBQ0EsRUFBQSxxQkFDQSxFQUFBLEdBQUEsaUNBRUEsR0FDQSxLQUFBLEVBQ0EsUUFBQSxHQUdBLEVBQUEsRUFBQSxzQkFDQSxHQUFBLFFBQUEsV0FDQSxHQUNBLEVBQUEsTUFBQSxRQUlBLElBQUEsR0FBQSxFQUFBLGlDQUNBLEVBQUEsSUFBQSxFQUFBLEdBR0EsUUFBQSxFQUFBLCtCQUNBLEVBQUEsbUJBQ0EsRUFBQSxzQkFDQSxFQUFBLG9CQUFBLEdBQUEsb0NBRUEsRUFBQSw0QkFDQSxJQUlBLFFBQUEsR0FBQSxHQUVBLEdBQUEsU0FBQSxFQUFBLENBZ0JBLElBQUEsR0FkQSxHQUFBLEVBQUEsZ0JBQ0EsRUFBQSxHQUFBLFFBQ0EsRUFBQSxTQUNBLEVBQUEsRUFDQSxFQUFBLEdBQ0EsS0FDQSxLQUNBLEVBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEVBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLGFBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxFQUFBLFlBQUEsR0FDQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsZUFBQSxHQUNBLEVBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxhQUFBLEVBQUEsWUFDQSxFQUFBLEdBQUEsbURBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxJQUNBLEVBQUEsRUFFQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsSUFBQSxFQUFBLE1BRUEsSUFBQSxHQUFBLEVBQUEsYUFBQSxZQUFBLEVBQUEsY0FBQSxFQUFBLE1BQUEsRUFBQSxRQUFBLEdBRUEsR0FBQSxTQUNBLFVBQUEsRUFDQSxRQUFBLElBR0EsRUFBQSxRQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FHQSxHQUFBLE1BQ0EsSUFJQSxLQUZBLEdBQUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLElBRUEsRUFBQSxLQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxPQUVBLElBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsYUFDQSxDQUVBLEtBQUEsRUFBQSxLQUFBLEdBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGtCQUNBLEdBQUEsUUFBQSxHQUdBLEdBQUEsRUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLEdBQ0EsR0FBQSxFQUFBLFVBTUEsTUFGQSxHQUFBLE1BQUEsRUFBQSxlQUFBLE1BRUEsRUFBQSwrQkFDQSxFQUFBLG1CQUNBLEVBQUEsc0JBQ0EsRUFBQSxvQkFBQSxHQUFBLFVBRUEsRUFBQSxvQkFDQSxFQUFBLFFBQUEsR0FBQSxnQ0FDQSxFQUFBLG1CQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsYUFBQSxJQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQ0EsRUFBQSxlQUFBLEdBQUEsbUJBQUEsT0FBQSxFQUFBLGtCQUNBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLEVBQUEsZUFBQSxFQUFBLGNBRUEsRUFBQSxpQ0FDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLFFBQUEsR0FBQSxPQUtBLFFBQUEsR0FBQSxHQUVBLElBQUEsR0FEQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSx1QkFBQSxFQUFBLGVBQUEsR0FBQSxHQUVBLEdBQUEsS0FBQSxHQUdBLE9BQUEsRUFBQSxlQUFBLElBR0EsUUFBQSxHQUFBLEdBQ0EsSUFBQSxFQUFBLEtBQUEsR0FBQSxPQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUVBLFFBQUEsRUFBQSxHQUdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLGNBQUEsV0FDQSxHQUFBLEVBQUEsV0FBQSxHQUFBLFdBQ0EsRUFBQSxFQUFBLFVBQUEsVUFLQSxPQUhBLEdBQUEsS0FBQSxHQUFBLElBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQUEsSUFBQSxFQUFBLElBQUEsSUFFQSxFQUFBLElBQUEsRUFBQSxJQUFBLEdBdEtBLEdBQUEsS0FFQSxHQUFBLGNBQUEsRUFBQSxLQUFBLDhCQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsOEJBRUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUVBLE9BQUEsR0FBQSxLQUFBLFdBQUEsRUFBQSxHQUFBLEVBQUEsSUFHQSxFQUFBLFdBQUEsV0FDQSxPQUFBLE1BQUEsRUFBQSxTQUNBLE9BQUEsTUFDQSxJQUFBLDZDQTJKQSxFQUFBLFNBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxTQUFBLGVBQUEsb0JBQ0EsUUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLFdBSUEsR0FBQSxTQUFBLElBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFlBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsYUFFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEVBQUEsNEJBQUEsYUFFQSxFQUFBLFFBQUEsRUFBQSxVQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsbUJBQ0EsS0FDQSxFQUFBLEdBQUEsZ0JBQUEsV0FFQSxHQUFBLEdBQUEsRUFBQSxLQUFBLGdCQUVBLFdBQUEsTUFBQSxpQkFDQSxZQUFBLEVBQ0EsT0FBQSxNQUlBLEVBQUEsTUFBQSxvQkFLQSxJQ3pTQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsWUFFQSxHQUFBLElBQUEsRUFBQSxlQUNBLEVBQUEsY0FHQSxFQUFBLFVBQUEsbUJBQUEsRUFBQSxRQUVBLFdBQUEsV0FDQSxLQUFBLG1CQUdBLGdCQUFBLFdBQ0EsS0FBQSxjQUFBLEVBQUEsS0FBQSxLQUFBLGNBQUEsTUFDQSxFQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsS0FBQSxnQkFHQSxjQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLEtBRUEsR0FBQSxLQUFBLFdBQUEsUUFBQSxXQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsTUFBQSxlQU1BLE1BQUEsRUFBQSxPQUFBLFNDL0JBLFNBQUEsRUFBQSxFQUFBLEdBRUEsWUFFQSxJQUFBLElBQUEsS0FBQSxJQUFBLElBTUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBQ0EsTUFBQSxVQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxLQUFBLEVBQ0EsS0FBQSxnQkFBQSxFQUNBLEtBQUEsUUFBQSxFQUFBLFFBQUEsR0FFQSxLQUFBLFVBQUEsV0FDQSxFQUFBLE1BQUEsU0FDQSxRQUFBLG9CQUNBLFlBQUEsRUFDQSxZQUFBLEVBQ0EsVUFBQSxFQUNBLFVBQUEsRUFDQSxTQUFBLGNBQ0EsU0FBQSxFQUNBLGdCQUFBLEVBQ0EsY0FDQSxVQUFBLEVBQUEsVUFDQSxRQUFBLEVBQUEsUUFDQSxZQUFBLEVBQUEsWUFDQSxZQUFBLEVBQUEsWUFBQSxFQUFBLFlBQUEsR0FBQSxnRUFFQSxXQUNBLE9BQUEsRUFBQSxLQUFBLE1BQ0EsSUFBQSxHQUFBLEdBQ0EsRUFBQSxVQUFBLFNBQUEsU0FDQSxNQUNBLEtBQUEsR0FBQSxHQUNBLEVBQUEsV0FBQSxTQUFBLFNBQ0EsTUFDQSxLQUFBLEdBQUEsR0FDQSxFQUFBLFVBQUEsU0FBQSxVQUtBLEVBQUEsZ0JBQUEsR0FBQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsU0FBQSxRQUNBLEdBQUEsZ0JBQUEsWUFBQSxVQUNBLEVBQUEsUUFBQSxZQUFBLFVBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxPQUFBLEdBQUEsU0FBQSxVQUdBLEVBQUEsS0FBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLE9BR0EsRUFBQSxLQUFBLGNBQUEsUUFBQSxLQUFBLFVBQUEsSUFBQSxRQUFBLHdCQUVBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxPQUFBLGVBQUEsbUJBQUEsSUFDQSxLQUFBLGlCQUdBLEtBQUEsVUFBQSxTQUFBLEdBQ0EsY0FBQSxFQUFBLFNBQ0EsRUFBQSxVQUFBLGVBQUEsUUFBQSxLQUFBLFVBQUEsS0FBQSxNQUdBLEVBQUEsc0JBQUEsUUFBQSxJQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQ0EsRUFBQSxtQkFBQSxTQUNBLEVBQUEsV0FBQSxJQUFBLE9BSUEsS0FBQSxJQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsR0FBQSxtQkFDQSxFQUFBLE1BQ0EsSUFBQSwyQkFDQSxLQUFBLE9BQ0EsTUFBQSxVQUFBLEVBQUEsV0FDQSxRQUFBLFdBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxLQUFBLE9BQUEsRUFDQSxFQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxPQUFBLEVBQ0EsRUFBQSxVQUFBLG1CQUFBLEVBQUEsUUFBQSxFQUFBLGFBQUEsRUFBQSxRQUNBLEVBQUEscUJBS0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQ0EsR0FBQSxVQUFBLEVBQUEsVUFBQSxXQUFBLEVBQUEsS0FBQSxLQUVBLEdBQUEsbUJBQ0EsRUFBQSxNQUNBLElBQUEsMkJBQ0EsS0FBQSxPQUNBLEtBQUEsRUFDQSxRQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsT0FBQSxHQUNBLG1CQUFBLEdBQUEsS0FBQSxPQUFBLEVBQUEsS0FBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLGNBQUEsRUFBQSxjQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsT0FDQSxFQUFBLFVBQUEsbUJBQUEsRUFBQSxRQUFBLEVBQUEsYUFDQSxnQkFBQSxFQUFBLFFBQ0EsV0FDQSxFQUFBLFNBQ0EsRUFBQSxZQUFBLEVBQUEsWUFFQSxFQUFBLFFBQ0EsRUFBQSxxQkFLQSxLQUFBLGFBQUEsV0FDQSxPQUFBLGVBQUEsS0FDQSxPQUFBLFNBQUEsS0FBQSxTQUdBLEtBQUEsT0FBQSxXQUNBLEdBQUEsZ0JBQUEsRUFBQSxRQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsdUJBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxHQUNBLEVBQUEsRUFBQSxRQUFBLEdBQ0EsRUFBQSxFQUFBLGlCQUFBLEdBQ0EsRUFBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxFQUVBLElBQUEsRUFBQSxPQUFBLENBUUEsR0FQQSxFQUFBLFNBQUEsc0JBRUEsSUFBQSxFQUFBLE9BQUEsYUFBQSx5QkFDQSxFQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsT0FDQSxFQUFBLFlBQUEsWUFBQSxFQUFBLE9BQUEsZUFBQSxZQUdBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxvQkFDQSxHQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsVUFDQSxFQUFBLElBQUEsR0FBQSxhQUNBLElBQUEsRUFBQSxLQUFBLGNBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSx5QkFDQSxHQUFBLEtBQUEsT0FBQSxJQUNBLEdBQUEsNkJBQ0EsR0FBQSxPQUNBLEdBQUEsaUNBQ0EsR0FBQSxrQ0FDQSxFQUFBLEtBQUEsUUFFQSxHQUFBLFdBRUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLFFBQ0EsRUFBQSxJQUFBLEdBQUEsYUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxHQUNBLEVBQUEsR0FBQSxnQkFFQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxPQUdBLEdBQUEsRUFBQSxLQUFBLGdCQUFBLEVBQUEsT0FBQSxhQUFBLFFBQUEsYUFBQSxFQUFBLEtBQUEsUUFDQSxFQUFBLFNBQUEsZUFHQSxHQUFBLElBQUEsR0FBQSxTQU1BLElBQUEsR0FBQSxFQUFBLGNBRUEsR0FBQSxRQUFBLEVBQUEsRUFBQSxhQUVBLFNBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxrQkFFQSxjQUFBLFdBRUEsRUFBQSxVQUFBLE1BRUEsSUFBQSxHQUFBLDZEQUNBLEdBQUEsUUFBQSxPQUFBLEdBQ0EsRUFBQSx1QkFBQSxPQUFBLEtBQUEsR0FBQSxRQUFBLFdBQ0EsRUFBQSxVQUFBLG9CQUlBLFlBQUEsU0FBQSxHQUNBLEdBQUEsbUJBQUEsR0FBQSxPQUFBLGFBQUEsUUFBQSxZQUFBLENBRUEsR0FBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLE1BQUEsR0FBQSxnQkFDQSxFQUFBLEVBQUEsdUJBQ0EsRUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsV0FBQSxFQUdBLEtBQUEsR0FBQSxFQUFBLGdCQUFBLEVBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxFQUFBLEtBSUEsRUFBQSxNQUFBLFFBQ0EsV0FBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsWUFDQSxFQUFBLGlCQUFBLEVBQ0EsRUFBQSxZQUFBLGdCQUNBLFdBQUEsV0FDQSxFQUFBLFlBQUEsZUFBQSxFQUFBLFNBQ0EsT0FFQSxFQUFBLE9BQ0EsRUFBQSxTQUFBLFlBRUEsU0FDQSxJQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsSUFDQSxHQUFBLEVBQUEsSUFBQSxJQUFBLEdBQUEsR0FDQSxHQUFBLE1BQUEsT0FDQSxHQUFBLFNBRUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsVUFBQSxlQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsaUJBQ0EsRUFBQSxVQUFBLEVBQUEsdURBQUEsQ0FFQSxHQUFBLE1BQUEsU0FDQSxRQUFBLDBCQUNBLFlBQUEsRUFDQSxZQUFBLEVBQ0EsVUFBQSxFQUNBLFVBQUEsRUFDQSxTQUFBLG9CQUNBLFNBQUEsRUFDQSxnQkFBQSxFQUNBLGNBQ0EsSUFBQSx1QkFBQSxFQUNBLFNBQUEsR0FBQSxvQkFDQSxXQUFBLEVBQ0EsUUFBQSxHQUFBLDRDQUFBLE9BQUEsS0FFQSxRQUFBLEVBQ0EsU0FBQSxRQUNBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsMkJBRUEsR0FBQSxRQUFBLEdBQUEsR0FBQSxRQUFBLFdBQ0EsRUFBQSxVQUFBLG1CQUdBLEVBQUEsYUFBQSxHQUFBLEdBQUEsUUFBQSxpQkFLQSxVQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsMkJBRUEsR0FBQSxRQUFBLElBQUEsV0FDQSxFQUFBLFlBSUEsZUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsSUFBQSxjQUFBLEVBQUEsUUFDQSxFQUFBLEdBQUEsUUFBQSxZQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFNBQ0EsR0FBQSxNQUFBLEdBQUEsWUFFQSxJQUFBLGdCQUFBLEVBQUEsUUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsZUFBQSxTQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsV0FDQSxFQUFBLE1BQUEsR0FBQSxjQUVBLEVBQUEsR0FBQSxRQUFBLFlBQUEsV0FDQSxFQUFBLE1BQUEsR0FBQSxRQUdBLElBQUEsRUFBQSxPQUFBLGFBQUEsd0JBQ0EsRUFBQSw2QkFBQSxHQUFBLFFBQUEsV0FDQSxFQUFBLE1BQUEsR0FBQSxrQkFHQSxJQUFBLG1CQUFBLEVBQUEsUUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsZUFBQSxTQUNBLEdBQUEsT0FBQSxlQUFBLG1CQUFBLEVBRUEsSUFBQSxFQUFBLE9BQUEsYUFBQSx5QkFDQSxFQUFBLEdBQUEsUUFBQSxnQkFBQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGVBQUEsa0JBQUEsUUFDQSxFQUFBLE1BQUEsR0FBQSxlQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsU0FFQSxFQUFBLE1BQUEsR0FBQSxhQUNBLEtBR0EsRUFBQSxHQUFBLFFBQUEsWUFBQSxXQUNBLEVBQUEsTUFBQSxHQUFBLGNBTUEsT0FBQSxRQUFBIiwiZmlsZSI6ImRhc2hib2FyZC0zZDljOTJmYzEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKENsYXNzLCBfLCAkLCBNKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoISBfLmhhcyhNLCAnZGFzaGJvYXJkJykpIHtcbiAgICAgICAgTS5kYXNoYm9hcmQgPSB7fTtcbiAgICB9XG5cbiAgICBNLmRhc2hib2FyZC5EYXNoYm9hcmRWaWV3ID0gQ2xhc3MuY3JlYXRlKHtcblxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoIU0uZGF0YS5kYXNoYm9hcmRfZW1wdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZV9wcm9ncmVzc19mZXRjaGVyID0gbmV3IE0uZGFzaGJvYXJkLkNvdXJzZVByb2dyZXNzRmV0Y2hlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5lbnJvbGxpbmdfbWFuYWdlciA9IG5ldyBNLmRhc2hib2FyZC5VbmVucm9sbGluZ01hbmFnZXIoKTtcbiAgICAgICAgICAgICAgICBNLmdvYWxfc2V0dGVyLmluaXQoXCJkYXNoYm9hcmRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJy5idG5bdGl0bGVdLCBoMSBzcGFuW3RpdGxlXScpLnRvb2x0aXAoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzY3JvbGxDbG91ZHNBbmRTdW4gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBzY3JvbGwgdGhlIGxhbmRzY2FwZSBoZWFkZXJcbiAgICAgICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgICAgICBpc05pZ2h0VGltZSA9ICRodG1sLmhhc0NsYXNzKFwibmlnaHRcIiksXG4gICAgICAgICAgICAgICAgJGNsb3VkcyA9ICQoJy5jbG91ZHMtaGVhZGVyJyksXG4gICAgICAgICAgICAgICAgJHN1biA9ICQoJy5zdW4nKSxcbiAgICAgICAgICAgICAgICBzdW5Qb3MgPSBpc05pZ2h0VGltZSA/IDEyNiA6IDY0O1xuXG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gKHdpbmRvdy5wYWdlWU9mZnNldCAhPT0gdW5kZWZpbmVkKSA/IHdpbmRvdy5wYWdlWU9mZnNldCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgICAgICAkY2xvdWRzLmNzcyhcInRvcFwiLCBzY3JvbGxUb3AgKiAwLjYgKyA2OCArICdweCcpO1xuICAgICAgICAgICAgICAgICRzdW4uY3NzKFwidG9wXCIsIHNjcm9sbFRvcCAqIDAuNCArIHN1blBvcyArICdweCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIE0ucmVuZGVyZXIucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIE0udmlldyA9IG5ldyBNLmRhc2hib2FyZC5EYXNoYm9hcmRWaWV3KCk7XG4gICAgICAgIE0udmlldy5zY3JvbGxDbG91ZHNBbmRTdW4oKTtcbiAgICB9KTtcblxufSkoQ2xhc3MsIF8sIGpRdWVyeSwgTUVNUklTRSk7XG4iLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCQsIE0sIG0sIF8sIGRhdGV0aW1lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gQ291cnNlTW9kZWwoZGF0YSkge1xuICAgICAgICB0aGlzLmF1ZGlvX21vZGUgPSBtLnByb3AoZGF0YS5hdWRpb19tb2RlKTtcbiAgICAgICAgdGhpcy52aWRlb19tb2RlID0gbS5wcm9wKGRhdGEudmlkZW9fbW9kZSk7XG4gICAgICAgIHRoaXMuaWQgPSBtLnByb3AoZGF0YS5pZCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG0ucHJvcChkYXRhLm5hbWUpO1xuICAgICAgICB0aGlzLnBob3RvID0gbS5wcm9wKGRhdGEucGhvdG8pO1xuICAgICAgICB0aGlzLnBlcmNlbnRfY29tcGxldGUgPSBtLnByb3AoZGF0YS5wZXJjZW50X2NvbXBsZXRlIHx8IDApO1xuICAgICAgICB0aGlzLmxlYXJuZWQgPSBtLnByb3AoZGF0YS5sZWFybmVkIHx8IDApO1xuICAgICAgICB0aGlzLm51bV90aGluZ3MgPSBtLnByb3AoZGF0YS5udW1fdGhpbmdzKTtcbiAgICAgICAgdGhpcy5pZ25vcmVkID0gbS5wcm9wKGRhdGEuaWdub3JlZCB8fCAwKTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IG0ucHJvcChkYXRhLmNhdGVnb3J5KTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IG0ucHJvcChkYXRhLmRlc2NyaXB0aW9uID8gZGF0YS5kZXNjcmlwdGlvbiA6IFwiXCIpO1xuXG4gICAgICAgIHRoaXMudXJsID0gbS5wcm9wKGRhdGEudXJsKTtcbiAgICAgICAgdGhpcy5nb2FsID0gbS5wcm9wKGRhdGEuZ29hbCk7XG4gICAgICAgIHRoaXMuZGlmZmljdWx0ID0gbS5wcm9wKGRhdGEuZGlmZmljdWx0IHx8IDApO1xuICAgICAgICB0aGlzLnJldmlldyA9IG0ucHJvcChNYXRoLm1pbihkYXRhLnJldmlldyB8fCAwLCA5OTkpKTtcbiAgICAgICAgdGhpcy5sZWFyblVybCA9IG0ucHJvcChkYXRhLnVybCArICdnYXJkZW4vbGVhcm4vJyk7XG4gICAgICAgIHRoaXMucmV2aWV3VXJsID0gbS5wcm9wKGRhdGEudXJsICsgJ2dhcmRlbi9jbGFzc2ljX3Jldmlldy8nKTtcbiAgICAgICAgdGhpcy5hdWRpb1Jldmlld1VybCA9IG0ucHJvcChkYXRhLnVybCArICdnYXJkZW4vbGlzdGVuaW5nX3NraWxscy8nKTtcbiAgICAgICAgdGhpcy5kaWZmaWN1bHRVcmwgPSBtLnByb3AoZGF0YS51cmwgKyAnZ2FyZGVuL2RpZmZpY3VsdF93b3Jkcy8nKTtcbiAgICAgICAgdGhpcy5zcGVlZFVybCA9IG0ucHJvcChkYXRhLnVybCArICdnYXJkZW4vc3BlZWRfcmV2aWV3LycpO1xuICAgICAgICB0aGlzLm1lZXRUaGVOYXRpdmVzID0gbS5wcm9wKGRhdGEudXJsICsgJ2dhcmRlbi9tZWV0X3RoZV9uYXRpdmVzLycpO1xuXG4gICAgICAgIHRoaXMubGVhZGVyYm9hcmRVcmwgPSBtLnByb3AoZGF0YS51cmwgKyAnbGVhZGVyYm9hcmQnKTtcblxuICAgICAgICB0aGlzLnByb0NoYXRzID0gbS5wcm9wKGRhdGEucHJvX2NoYXRzIHx8IFtdKTtcbiAgICAgICAgdGhpcy5ncmFtbWFyQ2hhdHMgPSBtLnByb3AoZGF0YS5ncmFtbWFyX2NoYXRzIHx8IFtdKTtcblxuICAgICAgICB0aGlzLmlzR29hbFNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdvYWwoKSAmJiB0aGlzLmdvYWwoKS5nb2FsID4gMDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmlzR29hbEFjaGlldmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGcgPSB0aGlzLmdvYWwoKTtcbiAgICAgICAgICAgIHJldHVybiBnLnBvaW50cyA+PSBnLmdvYWw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pc0luUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZXJjZW50X2NvbXBsZXRlKCkgPCAxMDA7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0NoYXRTZWxlY3Rvcihjb3Vyc2UsIGdyYW1tYXJWYXJpYW50KSB7XG4gICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcblxuICAgICAgICBNLm1vZGFsLmNvbnRlbnQoe1xuICAgICAgICAgICAgbW9kYWxJZDogXCJtb2RhbC1jaGF0LXNlbGVjdG9yXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJjaGF0LXNlbGVjdG9yXCIsXG4gICAgICAgICAgICBzdHlsZVZlcnNpb246IDIsXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgICAgICBzZWVUaHJ1OiBmYWxzZSxcbiAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGVWYXJzOiB7XG4gICAgICAgICAgICAgICAgcHJvQ2hhdHM6IGNvdXJzZS5wcm9DaGF0cygpLFxuICAgICAgICAgICAgICAgIGdyYW1tYXJDaGF0czogY291cnNlLmdyYW1tYXJDaGF0cygpLFxuICAgICAgICAgICAgICAgIHRhcmdldExhbmd1YWdlOiBjb3Vyc2UuY2F0ZWdvcnkoKSxcbiAgICAgICAgICAgICAgICBncmFtbWFyVmFyaWFudDogZ3JhbW1hclZhcmlhbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGh0bWwuYWRkQ2xhc3MoJ25vLXNjcm9sbCcpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcygnbm8tc2Nyb2xsJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dGFjaFVwc2VsbE1vZGFsKGJ0biwgaWQsIHNlc3Npb25UeXBlKSB7XG4gICAgICAgIHZhciAkdXBzZWxsTW9kYWwgPSAkKGlkKTtcbiAgICAgICAgJHVwc2VsbE1vZGFsLmZpbmQoJy5zZWUtYWxsLXBsYW5zJykuYXR0cignaHJlZicsIGdldFByZW1pdW1Vcmwoc2Vzc2lvblR5cGUpKTtcbiAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJHVwc2VsbE1vZGFsKSB7XG4gICAgICAgICAgICAgICAgJHVwc2VsbE1vZGFsLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSAnI210bi11cHNlbGwtbW9kYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvanMoJyNtdG4tdmlkZW8nLCB7IGNvbnRyb2xCYXI6IGZhbHNlIH0pLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FyZE1lbnUoY3RybCkge1xuICAgICAgICB2YXIgY291cnNlID0gY3RybC52bS5jb3Vyc2UoKTtcbiAgICAgICAgcmV0dXJuIG0oJ3NwYW4uY3RybC1idG4nLCBbbSgnc3Bhbi5pY29uJyksIG0oJ3VsLnRvb2x0aXAnLCBbbSgnbGknLCBbbSgnYS5vcHRpb24tYnRuJywgeyBocmVmOiBjb3Vyc2UudXJsKCkgfSwgW20oJ2kub3B0aW9uLXBpbicpLCBfdCgnQ291cnNlIGRldGFpbHMnKV0pXSksIG0oJ2xpJywgW20oJ2Eub3B0aW9uLWJ0bicsIHtcbiAgICAgICAgICAgICdvbmNsaWNrJzogZnVuY3Rpb24gb25jbGljayhlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIE0uc2hhcmluZy5mYWNlYm9va1NoYXJlQ2xpY2soJChlLnRhcmdldCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdocmVmJzogJyMnLFxuICAgICAgICAgICAgJ2RhdGEtdXJsJzogY291cnNlLnVybCgpLFxuICAgICAgICAgICAgJ2RhdGEtdGl0bGUnOiBjb3Vyc2UubmFtZSgpLFxuICAgICAgICAgICAgJ2RhdGEtcGljdHVyZSc6IGNvdXJzZS5waG90bygpLFxuICAgICAgICAgICAgJ2RhdGEtZGVzY3JpcHRpb24nOiBjb3Vyc2UuZGVzY3JpcHRpb24oKSxcbiAgICAgICAgICAgICdkYXRhLWNhcHRpb24nOiBfdCgnTWVtcmlzZSBpcyBhIGZ1biBhbmQgZWFzeSB3YXkgdG8gbGVhcm4gYW5kIGltcHJvdmUgeW91ciBtZW1vcnkhJylcblxuICAgICAgICB9LCBbbSgnaS5vcHRpb24tc2hhcmUnKSwgX3QoJ1NoYXJlIHdpdGggZnJpZW5kcycpXSldKSwgY3RybC52bS5jdXJyZW50RmlsdGVyKCkgPT09ICd0ZWFjaGluZycgPyAnJyA6IG0oJ2xpJywgW20oJ3NwYW4ub3B0aW9uLWJ0bicsIHtcbiAgICAgICAgICAgICdvbmNsaWNrJzogZnVuY3Rpb24gb25jbGljaygpIHtcbiAgICAgICAgICAgICAgICBjdHJsLnF1aXRDb3Vyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW20oJ2kub3B0aW9uLWRlbGV0ZScpLCBfdCgnUXVpdCBjb3Vyc2UnKV0pXSldKV0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhcmRQcm9ncmVzcyhjb3Vyc2UpIHtcbiAgICAgICAgdmFyIGlzQ291cnNlSW5Qcm9ncmVzcyA9IGNvdXJzZS5pc0luUHJvZ3Jlc3MoKSxcbiAgICAgICAgICAgIHJpZ2h0Q2xhc3NlcyA9IGlzQ291cnNlSW5Qcm9ncmVzcyA/IFsncmlnaHQnXSA6IFsncmlnaHQnLCAnaGFsZiddO1xuXG4gICAgICAgIHJldHVybiBtKCcud3JhcHBlcicsIFttKCcuY291cnNlLXByb2dyZXNzJywgW20oJ2RpdicsIHtcbiAgICAgICAgICAgICdjbGFzcyc6IHJpZ2h0Q2xhc3Nlcy5qb2luKCcgJylcbiAgICAgICAgfSwgW20oJ3NwYW4nLCBfdCgnX19sZWFybmVkX18gLyBfX2FsbF9fIHdvcmRzIGxlYXJuZWQnLCB7XG4gICAgICAgICAgICBsZWFybmVkOiBjb3Vyc2UubGVhcm5lZCgpLFxuICAgICAgICAgICAgYWxsOiBjb3Vyc2UubnVtX3RoaW5ncygpIC0gY291cnNlLmlnbm9yZWQoKVxuICAgICAgICB9KSldKSwgbSgnLnByb2dyZXNzLWJhci1jb250YWluZXInLCBbbSgnLnByb2dyZXNzLWJhcicsIHsgJ3N0eWxlJzogJ3dpZHRoOiAnICsgY291cnNlLnBlcmNlbnRfY29tcGxldGUoKSArICclJyB9KV0pLCBpc0NvdXJzZUluUHJvZ3Jlc3MgPyAnJyA6IG0oJy5sZWZ0LmhhbGYnLCBbbSgnc3Bhbi5jb3Vyc2UtY29tcGxldGUtdGV4dCcsICdDb3Vyc2UgQ29tcGxldGUhJyldKV0pXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FyZENvdXJzZUFjdGlvbnMoY291cnNlLCBpc1ByZW1pdW0pIHtcbiAgICAgICAgdmFyIGRpZmZCdG4gPSBzZXREaWZmaWN1bHRJdGVtc0J0bihpc1ByZW1pdW0sIGNvdXJzZSksXG4gICAgICAgICAgICBhdWRpb0J0biA9IHNldEF1ZGlvQnRuKGlzUHJlbWl1bSwgY291cnNlKSxcbiAgICAgICAgICAgIHNwZWVkQnRuID0gc2V0U3BlZWRCdG4oY291cnNlKSxcbiAgICAgICAgICAgIGxlYXJuQnRuID0gc2V0TGVhcm5CdG4oY291cnNlKSxcbiAgICAgICAgICAgIHJldmlld1ByYWN0aXNlQnRuID0gc2V0UmV2aWV3QnRuKGNvdXJzZSksXG4gICAgICAgICAgICBtZWV0VGhlTmF0aXZlc0J0biA9IHNldE1lZXRUaGVOYXRpdmVzQnRuKGlzUHJlbWl1bSwgY291cnNlKSxcbiAgICAgICAgICAgIHByb0NoYXRCdG4gPSBzZXRQcm9DaGF0c0J0bihpc1ByZW1pdW0sIGNvdXJzZSksXG4gICAgICAgICAgICBncmFtbWFyQ2hhdEJ0biA9IHNldEdyYW1tYXJDaGF0c0J0bihpc1ByZW1pdW0sIGNvdXJzZSk7XG5cbiAgICAgICAgcmV0dXJuIFtwcm9DaGF0QnRuLCBncmFtbWFyQ2hhdEJ0biwgZGlmZkJ0biwgbWVldFRoZU5hdGl2ZXNCdG4sIGF1ZGlvQnRuLCBzcGVlZEJ0biwgcmV2aWV3UHJhY3Rpc2VCdG4sIGxlYXJuQnRuXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYXJkQ291cnNlU0NCKGNvdXJzZSwgaXNQcmVtaXVtKSB7XG4gICAgICAgIHZhciBzY2IgPSBNLnNjYigpO1xuICAgICAgICByZXR1cm4gW3NjYl07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJlbWl1bVVybChzZXNzaW9uVHlwZSkge1xuICAgICAgICByZXR1cm4gJy9wcmVtaXVtLz9zZXNzaW9uX3R5cGU9JyArIHNlc3Npb25UeXBlICsgJyZzb3VyY2U9bW9kZV9zZWxlY3RvciNmZWF0dXJlcyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGlmZmljdWx0SXRlbXNCdG4oaXNQcmVtaXVtLCBjb3Vyc2UpIHtcbiAgICAgICAgdmFyIGRpZmZOdW0gPSBjb3Vyc2UuZGlmZmljdWx0KCksXG4gICAgICAgICAgICBkaWZmQ2xhc3NlcyA9IFsnYnV0dG9uJ10sXG4gICAgICAgICAgICBkaWZmSHJlZiA9ICcnLFxuICAgICAgICAgICAgZGlmZkJ0blRpdGxlID0gJycsXG4gICAgICAgICAgICBkaWZmQnRuQ29udGVudCA9IFttKCdzcGFuLmJ0bi1pbWcuaW1nLXN0YXInKSwgbSgnc3Bhbi50ZXh0JywgZGlmZk51bSldLFxuICAgICAgICAgICAgZGlmZkJ0bkVsZW0gPSAnYSc7XG5cbiAgICAgICAgLy8gcmVxdWlyZW1lbnRzOlxuICAgICAgICAvLyAtIG5vbiBwcmVtaXVtIC0+IGdyZXksIGNsaWNrYWJsZSBidXR0b25cbiAgICAgICAgLy8gLSBwcmVtaXVtIDAgd29yZCAtPiBncmV5LCBkaXNhYmxlZCBidXR0b25cbiAgICAgICAgLy8gLSBwcmVtaXVtIHdpdGggd29yZHMgLT4gcGluaywgY2xpY2thYmxlXG5cbiAgICAgICAgaWYgKGlzUHJlbWl1bSkge1xuICAgICAgICAgICAgaWYgKGRpZmZOdW0pIHtcbiAgICAgICAgICAgICAgICBkaWZmQnRuVGl0bGUgPSBfdCgnUmV2aWV3IHlvdXIgZGlmZmljdWx0IHdvcmRzJyk7XG4gICAgICAgICAgICAgICAgZGlmZkNsYXNzZXMucHVzaCgnb3JhbmdlJywgJ2ltZy1hbmQtdGV4dCcpO1xuICAgICAgICAgICAgICAgIGRpZmZIcmVmID0gY291cnNlLmRpZmZpY3VsdFVybCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaWZmQnRuVGl0bGUgPSBfdCgnTm8gZGlmZmljdWx0IHdvcmRzIHRvIHJldmlldycpO1xuICAgICAgICAgICAgICAgIGRpZmZCdG5FbGVtID0gJ3NwYW4nO1xuICAgICAgICAgICAgICAgIGRpZmZDbGFzc2VzLnB1c2goJ2Rpc2FibGVkJywgJ2ltZy1hbmQtdGV4dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlmZkJ0blRpdGxlID0gX3QoJ0xlYXJuIG1vcmUgYWJvdXQgTXkgRGlmZmljdWx0IFdvcmRzJyk7XG4gICAgICAgICAgICBkaWZmSHJlZiA9ICcjJztcbiAgICAgICAgICAgIGRpZmZDbGFzc2VzLnB1c2goJ29yYW5nZScsICdpbWctYW5kLXRleHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaWZmQXR0ciA9IHtcbiAgICAgICAgICAgICd0aXRsZSc6IGRpZmZCdG5UaXRsZSxcbiAgICAgICAgICAgICdocmVmJzogZGlmZkhyZWYsXG4gICAgICAgICAgICAnY2xhc3MnOiBkaWZmQ2xhc3Nlcy5qb2luKCcgJyksXG4gICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICdkYXRhLXBsYWNlbWVudCc6IFwiYm90dG9tXCJcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWlzUHJlbWl1bSkge1xuICAgICAgICAgICAgYXR0YWNoVXBzZWxsTW9kYWwoZGlmZkF0dHIsICcjZGlmZmljdWx0LXdvcmRzLXVwc2VsbC1tb2RhbCcsICdkaWZmaWN1bHRfd29yZHMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtKGRpZmZCdG5FbGVtLCBkaWZmQXR0ciwgZGlmZkJ0bkNvbnRlbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFNwZWVkQnRuKGNvdXJzZSkge1xuICAgICAgICB2YXIgc3BlZWRCdG4gPSAnJztcblxuICAgICAgICBpZiAoY291cnNlLmxlYXJuZWQoKSA+IDApIHtcbiAgICAgICAgICAgIHNwZWVkQnRuID0gbSgnYS5idXR0b24ub25seS1pbWcuc3BlZWQtcmVkJywge1xuICAgICAgICAgICAgICAgICdocmVmJzogY291cnNlLnNwZWVkVXJsKCksXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogX3QoXCJTcGVlZCByZXZpZXdcIiksXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogXCJib3R0b21cIlxuICAgICAgICAgICAgfSwgW20oJ3NwYW4uYnRuLWltZy5pbWctY2xvY2snKV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNwZWVkQnRuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEF1ZGlvQnRuKGlzUHJlbWl1bSwgY291cnNlKSB7XG4gICAgICAgIGlmICghY291cnNlLmF1ZGlvX21vZGUoKSB8fCBjb3Vyc2UubGVhcm5lZCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXVkaW9DbGFzc2VzID0gWydidXR0b24nLCAnb25seS1pbWcnXSxcbiAgICAgICAgICAgIGF1ZGlvVGl0bGUgPSAnJyxcbiAgICAgICAgICAgIGF1ZGlvSHJlZiA9ICcnO1xuXG4gICAgICAgIGlmIChpc1ByZW1pdW0pIHtcbiAgICAgICAgICAgIGF1ZGlvQ2xhc3Nlcy5wdXNoKCdwdXJwbGUnKTtcbiAgICAgICAgICAgIGF1ZGlvSHJlZiA9IGNvdXJzZS5hdWRpb1Jldmlld1VybCgpO1xuICAgICAgICAgICAgYXVkaW9UaXRsZSA9IF90KFwiUHJhY3RpY2UgeW91ciBsaXN0ZW5pbmcgc2tpbGxzXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXVkaW9IcmVmID0gJyMnO1xuICAgICAgICAgICAgYXVkaW9DbGFzc2VzLnB1c2goJ3B1cnBsZScpO1xuICAgICAgICAgICAgYXVkaW9UaXRsZSA9IF90KFwiTGVhcm4gbW9yZSBhYm91dCBhdWRpbyByZXZpZXdcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXVkaW9BdHRyID0ge1xuICAgICAgICAgICAgJ2hyZWYnOiBhdWRpb0hyZWYsXG4gICAgICAgICAgICAndGl0bGUnOiBhdWRpb1RpdGxlLFxuICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAnZGF0YS1wbGFjZW1lbnQnOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgJ2NsYXNzJzogYXVkaW9DbGFzc2VzLmpvaW4oJyAnKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghaXNQcmVtaXVtKSB7XG4gICAgICAgICAgICBhdHRhY2hVcHNlbGxNb2RhbChhdWRpb0F0dHIsICcjbGlzdGVuaW5nLXVwc2VsbC1tb2RhbCcsICdsaXN0ZW5pbmdfc2tpbGxzJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbSgnYScsIGF1ZGlvQXR0ciwgW20oJ3NwYW4uYnRuLWltZy5pbWctbm90ZScpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UmV2aWV3QnRuKGNvdXJzZSkge1xuICAgICAgICB2YXIgbmVlZHNSZXZpZXcgPSBjb3Vyc2UucmV2aWV3KCkgPiAwLFxuICAgICAgICAgICAgaHJlZiA9IGNvdXJzZS5yZXZpZXdVcmwoKSxcbiAgICAgICAgICAgIHR4dCA9IG5lZWRzUmV2aWV3ID8gX3QoJ1JldmlldyAoX19yZXZpZXdOdW1fXyknLCB7IHJldmlld051bTogY291cnNlLnJldmlldygpIH0pIDogX3QoJ1JldmlldycpLFxuICAgICAgICAgICAgY3NzQ2xhc3MgPSAnYS5idXR0b24nICsgKG5lZWRzUmV2aWV3ID8gJy5ibHVlJyA6ICcnKTtcblxuICAgICAgICByZXR1cm4gbShjc3NDbGFzcywge1xuICAgICAgICAgICAgJ2hyZWYnOiBocmVmLFxuICAgICAgICAgICAgJ3RpdGxlJzogX3QoXCJSZXZpZXcgd29yZHMgeW91J3ZlIGxlYXJuZWRcIiksXG4gICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICdkYXRhLXBsYWNlbWVudCc6IFwiYm90dG9tXCJcbiAgICAgICAgfSwgW20oJ3NwYW4udGV4dCcsIHR4dCldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRMZWFybkJ0bihjb3Vyc2UpIHtcbiAgICAgICAgdmFyIGxlYXJuQnRuID0gJyc7XG5cbiAgICAgICAgaWYgKGNvdXJzZS5pc0luUHJvZ3Jlc3MoKSkge1xuICAgICAgICAgICAgbGVhcm5CdG4gPSBtKCdhLmJ1dHRvbi5ncmVlbicsIHtcbiAgICAgICAgICAgICAgICAnaHJlZic6IGNvdXJzZS5sZWFyblVybCgpLFxuICAgICAgICAgICAgICAgICd0aXRsZSc6IF90KFwiTGVhcm4gbmV3IHdvcmRzXCIpLFxuICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwidG9vbHRpcFwiLFxuICAgICAgICAgICAgICAgICdkYXRhLXBsYWNlbWVudCc6IFwiYm90dG9tXCJcbiAgICAgICAgICAgIH0sIFttKCdzcGFuLnRleHQnLCBfdCgnTGVhcm4nKSldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsZWFybkJ0bjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRNZWV0VGhlTmF0aXZlc0J0bihpc1ByZW1pdW0sIGNvdXJzZSkge1xuXG4gICAgICAgIGlmICghY291cnNlLnZpZGVvX21vZGUoKSB8fCBjb3Vyc2UubGVhcm5lZCgpID09PSAwIHx8ICFjb3Vyc2UuaXNJblByb2dyZXNzKCkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuYXRpdmVzQ2xhc3NlcyA9IFsnYnV0dG9uJywgJ29ubHktaW1nJywgJ3RlYWwnXTtcbiAgICAgICAgdmFyIG5hdGl2ZXNCdG4gPSB7XG4gICAgICAgICAgICAnaHJlZic6IGlzUHJlbWl1bSA/IGNvdXJzZS5tZWV0VGhlTmF0aXZlcygpIDogJyMnLFxuICAgICAgICAgICAgJ3RpdGxlJzogX3QoJ210bl9idXR0b25fYWx0VGV4dCcpLFxuICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogJ3Rvb2x0aXAnLFxuICAgICAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogJ2JvdHRvbScsXG4gICAgICAgICAgICAnY2xhc3MnOiBuYXRpdmVzQ2xhc3Nlcy5qb2luKCcgJylcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWlzUHJlbWl1bSkge1xuICAgICAgICAgICAgYXR0YWNoVXBzZWxsTW9kYWwobmF0aXZlc0J0biwgJyNtdG4tdXBzZWxsLW1vZGFsJywgJ21lZXRfdGhlX25hdGl2ZXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtKCdhJywgbmF0aXZlc0J0biwgW20oJ3NwYW4uYnRuLWltZy5pbWctcGVyc29uJyldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRQcm9DaGF0c0J0bihpc1ByZW1pdW0sIGNvdXJzZSkge1xuICAgICAgICB2YXIgcHJvQ2hhdHNCdG4gPSAnJztcblxuICAgICAgICBpZiAoY291cnNlLnByb0NoYXRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNoYXRzQ2xhc3NlcyA9IFsnYnV0dG9uJywgJ29ubHktaW1nJywgJ3llbGxvdycsICdidG4tbGVmdCddO1xuICAgICAgICAgICAgdmFyIHByb0NoYXRzQnRuID0ge1xuICAgICAgICAgICAgICAgICdocmVmJzogJyMnLFxuICAgICAgICAgICAgICAgICd0aXRsZSc6IF90KCdjaGF0Ym90X2J1dHRvbl9ob3Zlcl9kZXNjcmlwdGlvbicpLFxuICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwidG9vbHRpcFwiLFxuICAgICAgICAgICAgICAgICdkYXRhLXBsYWNlbWVudCc6IFwiYm90dG9tXCIsXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogY2hhdHNDbGFzc2VzLmpvaW4oJyAnKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKCFpc1ByZW1pdW0pIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hVcHNlbGxNb2RhbChwcm9DaGF0c0J0biwgJyNjaGF0LXVwc2VsbC1tb2RhbCcsICdwcm9fY2hhdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9DaGF0c0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93Q2hhdFNlbGVjdG9yKGNvdXJzZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbSgnYScsIHByb0NoYXRzQnRuLCBbbSgnc3Bhbi5idG4taW1nLmltZy1iYWxsb29uJyldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRHcmFtbWFyQ2hhdHNCdG4oaXNQcmVtaXVtLCBjb3Vyc2UpIHtcbiAgICAgICAgdmFyIGdyYW1tYXJDaGF0c0J0biA9ICcnO1xuXG4gICAgICAgIGlmIChjb3Vyc2UuZ3JhbW1hckNoYXRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNoYXRzQ2xhc3NlcyA9IFsnYnV0dG9uJywgJ29ubHktaW1nJywgJ3B1cnBsZS1jaGF0JywgJ2J0bi1sZWZ0J107XG4gICAgICAgICAgICB2YXIgZ3JhbW1hckNoYXRzQnRuID0ge1xuICAgICAgICAgICAgICAgICdocmVmJzogJyMnLFxuICAgICAgICAgICAgICAgICd0aXRsZSc6IF90KCdjaGF0X2NhcmRfZ3JhbW1hYm90X2Rlc2NyaXB0aW9uJyksXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogXCJib3R0b21cIixcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjaGF0c0NsYXNzZXMuam9pbignICcpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoIWlzUHJlbWl1bSkge1xuICAgICAgICAgICAgICAgIGF0dGFjaFVwc2VsbE1vZGFsKGdyYW1tYXJDaGF0c0J0biwgJyNncmFtbWFyYm90LXVwc2VsbC1tb2RhbCcsICdncmFtbWFyJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdyYW1tYXJDaGF0c0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93Q2hhdFNlbGVjdG9yKGNvdXJzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtKCdhJywgZ3JhbW1hckNoYXRzQnRuLCBbbSgnc3Bhbi5idG4taW1nLmltZy1mZWF0aGVyJyldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJHb2FsKHZtKSB7XG4gICAgICAgIHZhciBjb3Vyc2UgPSB2bS5jb3Vyc2UoKSxcbiAgICAgICAgICAgIGdvYWwgPSBjb3Vyc2UuZ29hbCgpO1xuICAgICAgICB2YXIgYWN0aXZlQ2xzID0gdm0uaGlkZUdvYWwoKSA/ICcuaW5hY3RpdmUnIDogJy5hY3RpdmUnO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUdvYWxTdHJlYWsoKSB7XG4gICAgICAgICAgICB2bS5oaWRlR29hbCghdm0uaGlkZUdvYWwoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY291cnNlLmlzR29hbFNldCgpICYmICFjb3Vyc2UuaXNHb2FsQWNoaWV2ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG0oJ3NwYW4uc2ltcGxlLWJ0bi5nb2FsLXNldHRlci1idG4nICsgYWN0aXZlQ2xzLCB7XG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogX3QoJ0dvYWwgc2V0dGVyIGxldHMgeW91IHNldCBsZWFybmluZyB0YXJnZXRzJylcbiAgICAgICAgICAgIH0sIFttKCdzcGFuLm9ub2ZmJywgeyBvbmNsaWNrOiB0b2dnbGVHb2FsU3RyZWFrIH0sIFtfdCgnVG9kYXk6ICcpLCBtKCdzcGFuLnB0cycsIFttKCdzcGFuLm9yYW5nZScsIFtnb2FsLnBvaW50c10pLCBfdCgnIC8gX19nb2FsX18gcHRzJywgeyBnb2FsOiBnb2FsLmdvYWwgfSldKV0pXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlLmlzR29hbFNldCgpICYmIGNvdXJzZS5pc0dvYWxBY2hpZXZlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbSgnc3Bhbi5zaW1wbGUtYnRuLmdvYWwtc2V0dGVyLWJ0bi5kb25lJyArIGFjdGl2ZUNscywge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IF90KCdHb2FsIHNldHRlciBsZXRzIHlvdSBzZXQgbGVhcm5pbmcgdGFyZ2V0cycpXG4gICAgICAgICAgICB9LCBbbSgnc3Bhbi5vbm9mZicsIHsgb25jbGljazogdG9nZ2xlR29hbFN0cmVhayB9LCBfdCgnR29hbCBjb21wbGV0ZSEnKSldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtKCdzcGFuLnNpbXBsZS1idG4uZ29hbC1zZXR0ZXItYnRuLmluYWN0aXZlJywge1xuICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uIG9uY2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgIE0uZ29hbF9zZXR0ZXIuZ29hbHNbY291cnNlLmlkKCldLnNob3dQb3B1cCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogX3QoJ0dvYWwgc2V0dGVyIGxldHMgeW91IHNldCBsZWFybmluZyB0YXJnZXRzJylcbiAgICAgICAgICAgIH0sIFttKCdzcGFuLm9ub2ZmJywgX3QoJ1NldCBhIGRhaWx5IGdvYWwnKSldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGR1cmF0aW9uKGdvYWwpIHtcbiAgICAgICAgcmV0dXJuIGdvYWwgPT09IDE1MDAgPyA1IDogZ29hbCA9PT0gNjAwMCA/IDE1IDogNDU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGV2ZWwoZ29hbCkge1xuICAgICAgICByZXR1cm4gZ29hbCA9PT0gMTUwMCA/IFwiLmZpcnN0XCIgOiBnb2FsID09PSA2MDAwID8gXCIuc2Vjb25kXCIgOiBcIi50aGlyZFwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1YmJsZXModG9kYXksIG9yaWdpbmFsU3RyZWFrLCBjb21wbGV0ZWRHb2FsKSB7XG5cbiAgICAgICAgLy8gaW5zdGVhZCBvZiByb3RhdGluZyBhcnJheSwganVzdCBmaW5kIHRoZSBzdHJlYWsgYmVnaW5uaW5nIGluZGV4IGFuZCB0YWtlIGEgc3ViYXJyYXlcbiAgICAgICAgLy8gb2YgbGVuZ3RoIDcsIHN0YXJ0aW5nIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgc3RyZWFrLCBmcm9tIHRoaXMgdHdvV2Vla3MgYXJyYXlcbiAgICAgICAgdmFyIHR3b1dlZWtzID0gXy5yYW5nZSgwLCA3KS5jb25jYXQoXy5yYW5nZSgwLCA3KSkubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZXRpbWUuZ2V0V2Vla2RheU5hbWUoZCwgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY29tcGxldGUgPSBbXSxcbiAgICAgICAgICAgIGluY29tcGxldGUgPSBbXTtcblxuICAgICAgICAvLyBub3JtYWxpemUgc3RyZWFrIHRvIGluY2x1ZGUgdG9kYXkgaWYgdG9kYXkncyBnb2FsIGhhc24ndCBiZWVuIGNvbXBsZXRlZFxuICAgICAgICAvLyAtMSBiZWNhdXNlIHN0cmVhayBjb3VudCBpcyBiYXNlIG9uZSB3aGlsZSBhcnJheSBpbmRleCBpcyBiYXNlIDBcbiAgICAgICAgdmFyIHN0cmVhayA9IE1hdGgubWluKGNvbXBsZXRlZEdvYWwgPyBvcmlnaW5hbFN0cmVhayA6IG9yaWdpbmFsU3RyZWFrICsgMSwgNykgLSAxO1xuICAgICAgICB2YXIgc3RhcnREYXkgPSAodG9kYXkgKyA3IC0gc3RyZWFrKSAlIDc7XG5cbiAgICAgICAgLy8gZ2V0IGFsbCB0aGUgc3RyZWFrIGRheXMgaW5zaWRlIHRoZSBjb21wbGV0ZSBhcnJheVxuICAgICAgICB3aGlsZSAoc3RyZWFrID49IDApIHtcbiAgICAgICAgICAgIHZhciBkID0gdHdvV2Vla3Nbc3RhcnREYXldO1xuXG4gICAgICAgICAgICAvLyBkZWFsIHdpdGggdG9kYXksIHdoZXRoZXIgZ29hbCBpcyBpbiBwcm9ncmVzcyBvciBjb21wbGV0ZWQ/XG4gICAgICAgICAgICBpZiAoc3RyZWFrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlZEdvYWwpIGNvbXBsZXRlLnB1c2gobSgnc3Bhbi5zdHJlYWstYnViYmxlLmNvbXBsZXRlJywgW20oJ3NwYW4nLCBkKV0pKTtlbHNlIGluY29tcGxldGUucHVzaChtKCdzcGFuLnN0cmVhay1idWJibGUuY3VycmVudCcsIFttKCdzcGFuJywgZCldKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlLnB1c2gobSgnc3Bhbi5zdHJlYWstYnViYmxlLmNvbXBsZXRlJywgW20oJ3NwYW4nLCBkKV0pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnREYXkrKztcbiAgICAgICAgICAgIHN0cmVhay0tO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWludXMgY3VycmVudCBhY2NvcmRpbmcgdG8gY29tcGxldGVkR29hbCBzdGF0dXNcbiAgICAgICAgdmFyIGluY29tcGxldGVDb3VudCA9IGNvbXBsZXRlZEdvYWwgPyA3IC0gY29tcGxldGUubGVuZ3RoIDogNiAtIGNvbXBsZXRlLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmNvbXBsZXRlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgaW5jb21wbGV0ZS5wdXNoKG0oJ3NwYW4uc3RyZWFrLWJ1YmJsZS5pbmNvbXBsZXRlJywgW20oJ3NwYW4nLCB0d29XZWVrc1tzdGFydERheSArIGldKV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbbShcInNwYW4uY29tcGxldGVcIiwgY29tcGxldGUpLCBpbmNvbXBsZXRlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYXJkR29hbFN0cmVhayhjb3Vyc2VJZCwgZGF5LCBnb2FsKSB7XG4gICAgICAgIHZhciBwZXJjZW50Q29tcGxldGUgPSBNYXRoLm1pbihwYXJzZUludChnb2FsLnBvaW50cyAvIGdvYWwuZ29hbCAqIDEwMCksIDEwMCk7XG5cbiAgICAgICAgaWYgKCEoZGF5ID49IDAgJiYgNyA+IGRheSkpIHRocm93IFwiZXhwZWN0aW5nIGRheSB0byBiZSBhIHZhbHVlIGJldHdlZW4gMCBhbmQgNlwiO1xuXG4gICAgICAgIHJldHVybiBtKCcuZ29hbC1zZXR0ZXInLCBbbSgnLnN0cmVhay1lZGl0JywgW20oJy5sZXZlbCcgKyBsZXZlbChnb2FsLmdvYWwpKSwgbSgnLmR1cmF0aW9uJywgX3QoJ19fZHVyYXRpb25fXyBtaW5zIGEgZGF5JywgeyBkdXJhdGlvbjogZHVyYXRpb24oZ29hbC5nb2FsKSB9KSksIG0oJ3NwYW4uc2ltcGxlLWJ0bi5lZGl0LWdvYWwtYnRuJywge1xuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gb25jbGljaygpIHtcbiAgICAgICAgICAgICAgICBNLmdvYWxfc2V0dGVyLmdvYWxzW2NvdXJzZUlkXS5zaG93UG9wdXAoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAndGl0bGUnOiBfdCgnQWRqdXN0IHlvdXIgZ29hbCcpXG4gICAgICAgIH0sIFttKCdzcGFuJywgX3QoJ0VkaXQgZ29hbCcpKV0pXSksIG0oJy5zdHJlYWstcm93JywgW20oJy5zdHJlYWsnLCBbbSgnLnN0cmVhay1idWJibGVzJywgYnViYmxlcyhkYXksIGdvYWwuc3RyZWFrLCBwZXJjZW50Q29tcGxldGUgPT09IDEwMCkpXSksIG0oJy5zdHJlYWstZmFrZS1idG4nLCBbbSgnLm51bScsIGdvYWwuc3RyZWFrKSwgbSgnLnRleHQnLCBfdCgnc3RyZWFrJykpXSldLCBtKCcuZ29hbC1zZXR0ZXItcHJvZ3Jlc3MnLCBbbSgnLmJhcicsIHsgJ3N0eWxlJzogJ3dpZHRoOiAnICsgcGVyY2VudENvbXBsZXRlICsgJyUnIH0pXSkpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcXVpdENvdXJzZUhhbmRsZXIoY291cnNlSWQpIHtcbiAgICAgICAgbS5wb3N0KHtcbiAgICAgICAgICAgIHVybDogJy9hamF4L2NvdXJzZXMvcXVpdC8nLFxuICAgICAgICAgICAgZGF0YTogeyAnY291cnNlX2lkJzogY291cnNlSWQgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNLmRhc2hib2FyZC5jYXJkc0NvbXBvbmVudC5yZW1vdmVDYXJkKGNvdXJzZUlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWl0aHJpbCBjb21wb25lbnQgZmFjdG9yeVxuICAgIGZ1bmN0aW9uIENhcmRXaWRnZXQoYXJncykge1xuICAgICAgICB2YXIgd2lkZ2V0ID0ge1xuICAgICAgICAgICAgdm06IHtcbiAgICAgICAgICAgICAgICBjb3Vyc2U6IG0ucHJvcChhcmdzLmNvdXJzZSksXG4gICAgICAgICAgICAgICAgY3VycmVudEZpbHRlcjogbS5wcm9wKGFyZ3MuY3VycmVudEZpbHRlciksXG4gICAgICAgICAgICAgICAgaGlkZUdvYWw6IG0ucHJvcCghYXJncy5jb3Vyc2UuaXNHb2FsU2V0KCkpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2bTogd2lkZ2V0LnZtLFxuICAgICAgICAgICAgICAgICAgICBxdWl0Q291cnNlOiBmdW5jdGlvbiBxdWl0Q291cnNlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXJzZUlkID0gdGhpcy52bS5jb3Vyc2UoKS5pZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTS5tb2RhbC55ZXNfbm8oX3QoJ1F1aXQgdGhpcyBjb3Vyc2UnKSwgTS50cmFucy5xdWl0Q291cnNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVpdENvdXJzZUhhbmRsZXIoY291cnNlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpZXc6IGZ1bmN0aW9uIHZpZXcoY3RybCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3Vyc2UgPSBjdHJsLnZtLmNvdXJzZSgpLFxuICAgICAgICAgICAgICAgICAgICBpc0NvdXJzZUluUHJvZ3Jlc3MgPSBjb3Vyc2UuaXNJblByb2dyZXNzKCksXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbENsYXNzZXMgPSBpc0NvdXJzZUluUHJvZ3Jlc3MgPyBbJ2RldGFpbCddIDogWydkZXRhaWwnLCAnd2lkZSddO1xuXG4gICAgICAgICAgICAgICAgaWYgKE0uZGF0YS5GRUFUVVJFX0VOQUJMRV9TQ0IpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucyA9IGNhcmRDb3Vyc2VTQ0IoY291cnNlLCBNLnVzZXIuaXNfcHJlbWl1bSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucyA9IGNhcmRDb3Vyc2VBY3Rpb25zKGNvdXJzZSwgTS51c2VyLmlzX3ByZW1pdW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBtKCcuY291cnNlLWNhcmQtY29udGFpbmVyLmpzLWNvdXJzZS1jYXJkLWNvbnRhaW5lcicsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdjb3Vyc2UtJyArIGNvdXJzZS5pZCgpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGNvdXJzZS5pZCgpXG4gICAgICAgICAgICAgICAgfSwgW20oJy5jb3Vyc2UtcHJvZ3Jlc3MtYm94Jywge30sIFttKCcuY2FyZC10b3AnLCBbbSgnLmNhcmQtaW1hZ2UtY29sJywgW20oJ2FbaHJlZj1cIicgKyBjb3Vyc2UudXJsKCkgKyAnXCJdJywgW20oJy5pbWctY3JvcCcsIFttKCdpbWcuY291cnNlLXBob3RvW3NyYz1cIicgKyBjb3Vyc2UucGhvdG8oKSArICdcIl0nKSwgbSgnaW1nLmNhdGVnb3J5LXBob3RvW3NyYz1cIicgKyBjb3Vyc2UuY2F0ZWdvcnkoKS5waG90byArICdcIl0nKV0pXSldKSwgbSgnLmNhcmQtbWFpbi1jb250YWluZXInLCBbbSgnLnRvcC1tYWluJywgW20oJy53cmFwcGVyJywgW20oJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogZGV0YWlsQ2xhc3Nlcy5qb2luKCcgJylcbiAgICAgICAgICAgICAgICB9LCBbbSgncC50aXRsZVt0aXRsZT1cIicgKyBjb3Vyc2UubmFtZSgpICsgJ1wiXScsIFttKCdhW2hyZWY9XCInICsgY291cnNlLnVybCgpICsgJ1wiXScsIGNvdXJzZS5uYW1lKCkpXSldKSwgbSgnLnB1bGwtcmlnaHQnLCBbaXNDb3Vyc2VJblByb2dyZXNzID8gcmVuZGVyR29hbChjdHJsLnZtKSA6ICcnLCBtKCdhW2hyZWY9XCInICsgY291cnNlLmxlYWRlcmJvYXJkVXJsKCkgKyAnXCJdJywgW20oJ3NwYW4uc2ltcGxlLWJ0bi5sZWFkZXJib2FyZC1idG4nLCBbbSgnc3Bhbi5sZWFkZXJib2FyZC1pY29uJyldKV0pLCBjYXJkTWVudShjdHJsKV0pLCBjYXJkUHJvZ3Jlc3MoY291cnNlKSwgY291cnNlLmlzR29hbFNldCgpICYmIGlzQ291cnNlSW5Qcm9ncmVzcyAmJiAhY3RybC52bS5oaWRlR29hbCgpID8gY2FyZEdvYWxTdHJlYWsoY291cnNlLmlkKCksIE0uZGF0YS5kYXlfb2ZfdGhlX3dlZWssIGNvdXJzZS5nb2FsKCkpIDogJyddKV0pXSldKSwgY291cnNlLm51bV90aGluZ3MoKSAtIGNvdXJzZS5pZ25vcmVkKCkgPiAwID8gbSgnLmNhcmQtYm90dG9tJywgW20oJy5jb3Vyc2UtYWN0aW9ucycsIGFjdGlvbnMpXSkgOiAnJ10pXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHdpZGdldDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgd2lkZ2V0OiBDYXJkV2lkZ2V0LCBtb2RlbDogQ291cnNlTW9kZWwgfTtcbn07XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoNSk7XG5cbnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCQsIE0sIG0sIF8sIHNwcmludGYsIGRhdGV0aW1lKSB7XG5cbiAgICAvLyBrZXkgaW4gbG9jYWwgc3RvcmFnZVxuICAgIHZhciBMU19LRVkgPSAnZGFzaGJvYXJkX2ZpbHRlcic7XG4gICAgdmFyIE1JTl9OVU1fQ0FSRFMgPSA0O1xuXG4gICAgdmFyIGNhcmQgPSByZXF1aXJlKDEpKCQsIE0sIG0sIF8sIGRhdGV0aW1lKSxcbiAgICAgICAgRmV0Y2hlciA9IHJlcXVpcmUoNCkoJCwgTSwgbSwgXyk7XG5cbiAgICB2YXIgQ2FyZFdpZGdldCA9IGNhcmQud2lkZ2V0LFxuICAgICAgICBDb3Vyc2VNb2RlbCA9IGNhcmQubW9kZWw7XG5cbiAgICB2YXIgTEVBUk5JTkdfRklMVEVSID0gJ2xlYXJuaW5nJyxcbiAgICAgICAgVEVBQ0hJTkdfRklMVEVSID0gJ3RlYWNoaW5nJyxcbiAgICAgICAgUkVDRU5UX0ZJTFRFUiA9ICdtb3N0X3JlY2VudCcsXG4gICAgICAgIFdJVEhfR09BTF9GSUxURVIgPSAnd2l0aF9nb2FsJyxcbiAgICAgICAgSU5JVElBTCA9ICdpbml0aWFsJyxcbiAgICAgICAgREVGQVVMVF9GSUxURVJTID0ge1xuICAgICAgICAnaW5pdGlhbCc6IF90KFwiRmlsdGVyIFJlc3VsdHNcIiksXG4gICAgICAgICd3aXRoX2dvYWwnOiBfdChcIldpdGggR29hbCBTZXRcIiksXG4gICAgICAgICdtb3N0X3JlY2VudCc6IF90KFwiUmVjZW50bHkgTGVhcm5lZFwiKSxcbiAgICAgICAgJ3RlYWNoaW5nJzogX3QoXCJUZWFjaGluZ1wiKSxcbiAgICAgICAgJ2xlYXJuaW5nJzogX3QoXCJCeSBDYXRlZ29yeVwiKVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVGaWx0ZXJDaG9pY2UoY3RybCwgZWxlbSkge1xuICAgICAgICB2YXIgY2hvaWNlID0gZWxlbS5vcHRpb25zW2VsZW0uc2VsZWN0ZWRJbmRleF0sXG4gICAgICAgICAgICBjaG9pY2VOYW1lID0gY2hvaWNlLmdldEF0dHJpYnV0ZSgnZGF0YS1jaG9pY2UnKSxcbiAgICAgICAgICAgIGNob2ljZVZhbHVlID0gY2hvaWNlLnZhbHVlO1xuXG4gICAgICAgIHZhciBjdXJyZW50RmlsdGVyID0gY3RybC52bS5jdXJyZW50RmlsdGVyKCksXG4gICAgICAgICAgICBjdXJyZW50Q2F0SWQgPSBjdHJsLnZtLmN1cnJlbnRDYXRJZCgpO1xuXG4gICAgICAgIGlmIChjaG9pY2VOYW1lICE9PSBjdXJyZW50RmlsdGVyIHx8IGNob2ljZVZhbHVlICE9PSBjdXJyZW50Q2F0SWQpIHtcbiAgICAgICAgICAgIGVsZW0uZGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoY2hvaWNlTmFtZSA9PT0gTEVBUk5JTkdfRklMVEVSKSB7XG4gICAgICAgICAgICAgICAgY2hvaWNlVmFsdWUgPSBwYXJzZUludChjaG9pY2VWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZHJhdyB0byB1cGRhdGUgZmlsdGVyIHRpdGxlIGJlZm9yZSBsb2FkaW5nIGNvdXJzZXNcbiAgICAgICAgICAgIGN0cmwudm0uaXNMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgY3RybC5yZXNldENvdXJzZXMoKTtcbiAgICAgICAgICAgIG0ucmVkcmF3KCk7XG4gICAgICAgICAgICBGZXRjaGVyLmZldGNoQ291cnNlcyhjaG9pY2VOYW1lLCBjaG9pY2VOYW1lID09PSBMRUFSTklOR19GSUxURVIgPyBwYXJzZUludChjaG9pY2VWYWx1ZSkgOiBudWxsKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2F2ZWRGaWx0ZXIgPSBDYXJkc0NvbXBvbmVudC5nZXRTYXZlZEZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNhdmVkRmlsdGVyWydjb3Vyc2VzX2ZpbHRlciddID0gY2hvaWNlTmFtZTtcbiAgICAgICAgICAgICAgICBjdHJsLnZtLmN1cnJlbnRGaWx0ZXIoY2hvaWNlTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNob2ljZU5hbWUgPT09IExFQVJOSU5HX0ZJTFRFUikge1xuICAgICAgICAgICAgICAgICAgICBzYXZlZEZpbHRlclsnY2F0ZWdvcnlfaWQnXSA9IGNob2ljZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjdHJsLnZtLmN1cnJlbnRDYXRJZChjaG9pY2VWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIENhcmRzQ29tcG9uZW50LnNhdmVkRmlsdGVyKHNhdmVkRmlsdGVyKTtcblxuICAgICAgICAgICAgICAgIC8vIGludmFsaWRhdGUgZXhpc3Rpbmcgd2lkZ2V0c1xuICAgICAgICAgICAgICAgIGN0cmwudm0ud2lkZ2V0cyh7fSk7XG4gICAgICAgICAgICAgICAgY3RybC52bS5pc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGVsZW0uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyRmlsdGVyKGN0cmwpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXIgPSBjdHJsLnZtLmN1cnJlbnRGaWx0ZXIoKSxcbiAgICAgICAgICAgIGN1cnJlbnRDYXRJZCA9IGN0cmwudm0uY3VycmVudENhdElkKCksXG4gICAgICAgICAgICBsZWFybmluZ0NhdGVnb3JpZXMgPSBjdHJsLnZtLmNhdGVnb3JpZXMoKSxcbiAgICAgICAgICAgIGlzUmV2aWV3TnVtc0xvYWRlZCA9IGN0cmwudm0uaXNSZXZpZXdOdW1zTG9hZGVkKGN1cnJlbnRDYXRJZCk7XG5cbiAgICAgICAgdmFyIHRpdGxlVGV4dCwgcmV2aWV3Q2F0ZWdvcnlMaW5rLCByZXZpZXdDYXRlZ29yeVRleHQsIGN1cnJlbnRSZXZpZXdOdW07XG5cbiAgICAgICAgc3dpdGNoIChjdXJyZW50RmlsdGVyKSB7XG5cbiAgICAgICAgICAgIGNhc2UgSU5JVElBTDpcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQgPSBERUZBVUxUX0ZJTFRFUlNbUkVDRU5UX0ZJTFRFUl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgTEVBUk5JTkdfRklMVEVSOlxuXG4gICAgICAgICAgICAgICAgLy8gcGFyc2luZyBjdXJyZW50IGNhdGVnb3J5IGluZm9cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENhdGVnb3J5ID0gXy5maW5kKGxlYXJuaW5nQ2F0ZWdvcmllcywgZnVuY3Rpb24gKGNhdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0WydpZCddID09PSBjdXJyZW50Q2F0SWQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50UmV2aWV3TnVtID0gaXNSZXZpZXdOdW1zTG9hZGVkID8gTS5kYXRhLmNhdF9yZXZpZXdfbnVtc1tjdXJyZW50Q2F0SWRdIDogY3RybC52bS50b1Jldmlld1RvdGFsKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBmb3IgcGVvcGxlIHdobyBhcmUgYWxyZWFkeSBhZmZlY3RlZCBieSB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2F0ZWdvcnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMU19LRVkpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0ID0gY3VycmVudENhdGVnb3J5Lm5hbWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJldmlld051bSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q2F0ZWdvcnlMaW5rID0gc3ByaW50ZignL2dhcmRlbi9yZXZpZXcvJXMvJywgY3VycmVudENhdGVnb3J5LnNsdWcpO1xuICAgICAgICAgICAgICAgICAgICByZXZpZXdDYXRlZ29yeVRleHQgPSAnICcgKyBfdCgnUmV2aWV3IChfX3Jldmlld051bV9fKScsIHsgcmV2aWV3TnVtOiBjdXJyZW50UmV2aWV3TnVtIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0ID0gREVGQVVMVF9GSUxURVJTW2N1cnJlbnRGaWx0ZXJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbHRlcldpZGdldCA9IG0oJy5jb3Vyc2VzLWZpbHRlci1jb250YWluZXInLCBbbSgnLmxlZnQnLCBbbSgnLnRpdGxlLWNvbnRhaW5lcicsIFttKCdoMS50aXRsZScsIHRpdGxlVGV4dCldKV0pLCBtKCcucmlnaHQnLCBbY3VycmVudEZpbHRlciA9PT0gVEVBQ0hJTkdfRklMVEVSID8gbSgnYS5idXR0b24uZ3JlZW4uY2FwcGVkJywgeyAnaHJlZic6ICcvY291cnNlL2NyZWF0ZS8nIH0sIF90KCdDcmVhdGUgY291cnNlJykpIDogJycsIHJldmlld0NhdGVnb3J5TGluayA/IG0oJ2EuYnV0dG9uLmJsdWUnLCB7IGhyZWY6IHJldmlld0NhdGVnb3J5TGluayB9LCByZXZpZXdDYXRlZ29yeVRleHQpIDogJycsIG0oJy5zZWxlY3QtY29udGFpbmVyJywgW20oJ3NlbGVjdC5jb3Vyc2VzLWZpbHRlcicsIHtcbiAgICAgICAgICAgIG5hbWU6IFwiY291cnNlcy1maWx0ZXJcIixcbiAgICAgICAgICAgIHRpdGxlOiBfdChcIkZpbHRlciB5b3VyIHBhZ2UgY29udGVudFwiKSxcbiAgICAgICAgICAgIG9uY2hhbmdlOiBmdW5jdGlvbiBvbmNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBoYW5kbGVGaWx0ZXJDaG9pY2UoY3RybCwgZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIF8ubWFwKERFRkFVTFRfRklMVEVSUywgZnVuY3Rpb24gKHRleHQsIGtleSkge1xuICAgICAgICAgICAgdmFyIGVsZW07XG5cbiAgICAgICAgICAgIGlmIChrZXkgPT09IElOSVRJQUwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHsgXCJkYXRhLWNob2ljZVwiOiBSRUNFTlRfRklMVEVSLCB2YWx1ZTogUkVDRU5UX0ZJTFRFUiwgZGlzYWJsZWQ6IFwiZGlzYWJsZWRcIiB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWx0ZXIgPT09IGtleSkgcHJvcFsnc2VsZWN0ZWQnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxlbSA9IG0oXCJvcHRpb25cIiwgcHJvcCwgdGV4dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gTEVBUk5JTkdfRklMVEVSKSB7XG4gICAgICAgICAgICAgICAgZWxlbSA9IG0oJ29wdGdyb3VwJywgeyAnbGFiZWwnOiB0ZXh0IH0sIF8ubWFwKGxlYXJuaW5nQ2F0ZWdvcmllcywgZnVuY3Rpb24gKGNhdCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXRJZCA9IGNhdFsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSB7IFwiZGF0YS1jaG9pY2VcIjogTEVBUk5JTkdfRklMVEVSLCB2YWx1ZTogY2F0SWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdFJldmlld051bSA9IGlzUmV2aWV3TnVtc0xvYWRlZCA/IE0uZGF0YS5jYXRfcmV2aWV3X251bXNbY2F0SWRdIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvblRleHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWx0ZXIgPT09IExFQVJOSU5HX0ZJTFRFUiAmJiBjdXJyZW50Q2F0SWQgPT09IGNhdElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wWydzZWxlY3RlZCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvblRleHQgPSBjYXRbJ25hbWUnXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvblRleHQgPSBjYXRSZXZpZXdOdW0gPiAwID8gc3ByaW50ZignJXMgKCVkKScsIGNhdFsnbmFtZSddLCBjYXRSZXZpZXdOdW0pIDogY2F0WyduYW1lJ107XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSgnb3B0aW9uJywgcHJvcCwgb3B0aW9uVGV4dCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHsgXCJkYXRhLWNob2ljZVwiOiBrZXksIHZhbHVlOiBrZXkgfTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbHRlciA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BbJ3NlbGVjdGVkJ10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtID0gbShcIm9wdGlvblwiLCBwcm9wLCB0ZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgIH0pKV0pXSldKTtcblxuICAgICAgICByZXR1cm4gZmlsdGVyV2lkZ2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIHJlbmRlciBsb2FkaW5nIGluZGljYXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW5kZXJMb2FkaW5nSW5kaWNhdGlvbihjdHJsKSB7XG4gICAgICAgIC8vIEBUT0RPOiBtYWtlIHRoaXMgcmVzcG9uZGluZyB0byB0aGUgbnVtYmVyIG9mIGxvYWRpbmcgY2FyZHNcbiAgICAgICAgdmFyIGxvYWRpbmdOdW1zID0gY3RybC52bS5jb3Vyc2VzT3JkZXIoKS5sZW5ndGggPiAwID8gMSA6IDI7XG5cbiAgICAgICAgdmFyIGxvYWRpbmdCbG9ja3MgPSBfLm1hcChfLnJhbmdlKDAsIGxvYWRpbmdOdW1zKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG0oJy5sb2FkaW5nLWl0ZW0nLCBbbSgnLmxvYWRpbmctYW5pbWF0aW9uJywgW20oJy5iYWNrZ3JvdW5kLW1hc2tlci50aXRsZS1zZXBhcmF0b3InKSwgbSgnLmJhY2tncm91bmQtbWFza2VyLmltYWdlLXJpZ2h0JyksIG0oJy5iYWNrZ3JvdW5kLW1hc2tlci5pbWFnZS1ib3R0b20nKSwgbSgnLmJhY2tncm91bmQtbWFza2VyLnN0YXRzLXRvcCcpLCBtKCcuYmFja2dyb3VuZC1tYXNrZXIuc3RhdHMtbGVmdCcpLCBtKCcuYmFja2dyb3VuZC1tYXNrZXIucHJvZ3Jlc3MtdG9wJyksIG0oJy5iYWNrZ3JvdW5kLW1hc2tlci5wcm9ncmVzcy1ib3R0b20nKV0pXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtKCcubG9hZGluZy13cmFwcGVyJywgbG9hZGluZ0Jsb2Nrcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gcmVuZGVyIGEgbGlzdCBvZiBjb3Vyc2UgY2FyZHNcbiAgICAgKiBAcGFyYW0gY3RybCBPYmplY3QgbWFzdGVyIGNvbXBvbmVudCdzIGNvbnRyb2xsZXJcbiAgICAgKiBAcmV0dXJuIEFycmF5XG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVuZGVyQ2FyZHNMaXN0KGN0cmwpIHtcbiAgICAgICAgdmFyIHZtID0gY3RybC52bSxcbiAgICAgICAgICAgIGN1cnJlbnRDb3Vyc2VzID0gdm0uY291cnNlcygpLFxuICAgICAgICAgICAgY3VycmVudEZpbHRlciA9IHZtLmN1cnJlbnRGaWx0ZXIoKSxcbiAgICAgICAgICAgIGV4aXN0aW5nV2lkZ2V0cyA9IHZtLndpZGdldHMoKTtcblxuICAgICAgICByZXR1cm4gXy5tYXAodm0uY291cnNlc09yZGVyKCksIGZ1bmN0aW9uIChjb3Vyc2VJZCkge1xuXG4gICAgICAgICAgICB2YXIgY291cnNlRGF0YSA9IGN1cnJlbnRDb3Vyc2VzW2NvdXJzZUlkXTtcblxuICAgICAgICAgICAgTS5nb2FsX3NldHRlci5nb2Fsc1tjb3Vyc2VJZF0gPSBuZXcgTS5Hb2FsKGNvdXJzZUlkLCBjb3Vyc2VEYXRhLnBob3RvKCksIGNvdXJzZURhdGEubmFtZSgpLCBjb3Vyc2VEYXRhLmdvYWwoKSB8fCB7fSwgZmFsc2UsIGZhbHNlKTtcblxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nV2lkZ2V0c1tjb3Vyc2VJZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nV2lkZ2V0c1tjb3Vyc2VJZF0gPSBDYXJkV2lkZ2V0KHsgY291cnNlOiBjb3Vyc2VEYXRhLCBjdXJyZW50RmlsdGVyOiBjdXJyZW50RmlsdGVyIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdXaWRnZXRzW2NvdXJzZUlkXTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdW53cmFwIGEgbGlzdCBvZiBjb3Vyc2VzIGludG8gZGljdGlvbmFyeSBvZiBDb3Vyc2VNb2RlbCBvYmplY3RcbiAgICAvLyBhbmQgdGhlaXIgc29ydGVkIG9yZGVyIGJhc2VkIG9uIHRoZSBmaWx0ZXJcbiAgICBmdW5jdGlvbiB1bndyYXBDb3Vyc2VzKGNvdXJzZXMpIHtcbiAgICAgICAgLy8ga2VlcCBhbiBvcmRlciBhcnJheSBvZiBjb3Vyc2VzIGJlY2F1c2UgSlMgb2JqZWN0IGlzIG9yZGVyLWxlc3NcbiAgICAgICAgdmFyIG9yZGVyID0gW10sXG4gICAgICAgICAgICB1bndyYXBwZWQgPSB7fTtcbiAgICAgICAgY291cnNlcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICB1bndyYXBwZWRbYy5pZF0gPSBuZXcgQ291cnNlTW9kZWwoYyk7XG4gICAgICAgICAgICBvcmRlci5wdXNoKGMuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt1bndyYXBwZWQsIG9yZGVyXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVUb29sdGlwKGVsZW0sIGlzSW5pdCkge1xuICAgICAgICBpZiAoIWlzSW5pdCkgJCgnKltkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKHsgY29udGFpbmVyOiAnYm9keScgfSk7XG4gICAgfVxuXG4gICAgLy8gYSBjYXJkcyBjb21wb25lbnQgY29udGFpbnMgYWxsIGNhcmQgd2lkZ2V0c1xuICAgIGZ1bmN0aW9uIENhcmRzQ29tcG9uZW50KGZpbHRlck9wdHMpIHtcblxuICAgICAgICB2YXIgY3VycmVudENhdGVnb3J5SWQgPSBwYXJzZUludChmaWx0ZXJPcHRzWydjYXRlZ29yeV9pZCddKSxcbiAgICAgICAgICAgIGN1cnJlbnRGaWx0ZXIgPSBmaWx0ZXJPcHRzWydjb3Vyc2VzX2ZpbHRlciddO1xuXG4gICAgICAgIHZhciBjb21wb25lbnQgPSB7XG4gICAgICAgICAgICB2bToge1xuICAgICAgICAgICAgICAgIGlzTG9hZGluZzogbS5wcm9wKHRydWUpLFxuICAgICAgICAgICAgICAgIGlzUmV2aWV3TnVtc0xvYWRlZDogZnVuY3Rpb24gaXNSZXZpZXdOdW1zTG9hZGVkKGNhdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRJZCAmJiBfLmhhcyhNLmRhdGEuY2F0X3Jldmlld19udW1zLCBjYXRJZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb3Vyc2VzOiBtLnByb3Aoe30pLFxuICAgICAgICAgICAgICAgIHRvUmV2aWV3VG90YWw6IG0ucHJvcCgwKSxcbiAgICAgICAgICAgICAgICBjb3Vyc2VzT3JkZXI6IG0ucHJvcChbXSksXG4gICAgICAgICAgICAgICAgd2lkZ2V0czogbS5wcm9wKHt9KSxcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyOiBtLnByb3AoY3VycmVudEZpbHRlciksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllczogbS5wcm9wKGZpbHRlck9wdHNbJ2xlYXJuaW5nX2NhdGVnb3JpZXMnXSksXG4gICAgICAgICAgICAgICAgY3VycmVudENhdElkOiBtLnByb3AoaXNOYU4oY3VycmVudENhdGVnb3J5SWQpID8gbnVsbCA6IGN1cnJlbnRDYXRlZ29yeUlkKSxcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBzdGlsbCBjb3Vyc2VzIHRvIGZldGNoXG4gICAgICAgICAgICAgICAgaGFzTW9yZUNvdXJzZXM6IG0ucHJvcCh0cnVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3c6ICQod2luZG93KSxcbiAgICAgICAgICAgICAgICAgICAgdm06IGNvbXBvbmVudC52bSxcbiAgICAgICAgICAgICAgICAgICAgc2V0R29hbDogZnVuY3Rpb24gc2V0R29hbChjb3Vyc2VJZCwgZ29hbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3Vyc2UgPSB0aGlzLnZtLmNvdXJzZXMoKVtjb3Vyc2VJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3Vyc2UuZ29hbChnb2FsRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZtLndpZGdldHMoKVtjb3Vyc2VJZF0udm0uaGlkZUdvYWwoIWNvdXJzZS5pc0dvYWxTZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNhcmQ6IGZ1bmN0aW9uIHJlbW92ZUNhcmQoY291cnNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZtLmNvdXJzZXMoKVtjb3Vyc2VJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZtLmNvdXJzZXNPcmRlcihfLndpdGhvdXQodGhpcy52bS5jb3Vyc2VzT3JkZXIoKSwgY291cnNlSWQpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0J3MganVzdCByZWxvYWQgdGhlIHBhZ2UgaWYgdGhlIGNvdXJzZSBsaXN0IGZvciB0aGlzIGZpbHRlciBpcyBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBpdCdzIGEgbmV3IHVzZXIgd2l0aCBvbmx5IG9uZSBjb3Vyc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gaWYgaGUvc2hlIHF1aXRzIGl0LHRoZSBkaXNwbGF5IHJpZ2h0IG5vdyBpcyBzdGlsbCByZW5kZXJlZCBieSBkamFuZ28gKCEpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gY2xlYXIgbG9jYWxTdG9yYWdlIGlmIHF1aXRpbmcgdGhlIGxhc3QgY291cnNlIGluIGEgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGl0IGZhbGxzIGJhY2sgdG8gbW9zdCByZWNlbnQgb24gbmV4dCBwYWdlIGxvYWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLnNpemUodGhpcy52bS5jb3Vyc2VzKCkpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudm0uY3VycmVudEZpbHRlcigpID09PSBMRUFSTklOR19GSUxURVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTFNfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldENvdXJzZXM6IGZ1bmN0aW9uIHNldENvdXJzZXMoY291cnNlcywgaGFzTW9yZUNvdXJzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3Vyc2VzQW5kT3JkZXIgPSB1bndyYXBDb3Vyc2VzKGNvdXJzZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52bS5jb3Vyc2VzKF8uYXNzaWduKHRoaXMudm0uY291cnNlcygpLCBjb3Vyc2VzQW5kT3JkZXJbMF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudm0uY291cnNlc09yZGVyKHRoaXMudm0uY291cnNlc09yZGVyKCkuY29uY2F0KGNvdXJzZXNBbmRPcmRlclsxXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52bS5pc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52bS5oYXNNb3JlQ291cnNlcyhoYXNNb3JlQ291cnNlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBSZW1vdmUgYWxsIGN1cnJlbnRseSBkaXNwbGF5ZWQgY291cnNlcyB3aGVuIHN3aXRjaGluZyBmaWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgICogV2UgaGF2ZSB0byBkbyB0aGF0IG5vdyBiZWNhdXNlIHdlIGhhdmUgcGFnaW5nIHNvIHRoZSBsb2FkaW5nIHNjcmVlbiBkb2Vzbid0IG92ZXJyaWRlXG4gICAgICAgICAgICAgICAgICAgICAqIGNvdXJzZXMgZGlzcGxheSBhbnltb3JlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICByZXNldENvdXJzZXM6IGZ1bmN0aW9uIHJlc2V0Q291cnNlcygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudm0uY291cnNlcyh7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZtLmNvdXJzZXNPcmRlcihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZtLmhhc01vcmVDb3Vyc2VzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXRUb1Jldmlld1RvdGFsOiBmdW5jdGlvbiBzZXRUb1Jldmlld1RvdGFsKHRvUmV2aWV3VG90YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudm0udG9SZXZpZXdUb3RhbCh0b1Jldmlld1RvdGFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZE1vcmVDb3Vyc2VzOiBmdW5jdGlvbiBsb2FkTW9yZUNvdXJzZXMoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtLnN0YXJ0Q29tcHV0YXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudm0uaXNMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbS5lbmRDb21wdXRhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IHRoaXMudm0uY3VycmVudEZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IF8uc2l6ZSh0aGlzLnZtLmNvdXJzZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSBvZmZzZXQgPj0gTUlOX05VTV9DQVJEUyA/IE1JTl9OVU1fQ0FSRFMgKiAyIDogTUlOX05VTV9DQVJEUztcbiAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoZXIuZmV0Y2hDb3Vyc2VzKGN1cnJlbnRGaWx0ZXIsIGN1cnJlbnRGaWx0ZXIgPT09IExFQVJOSU5HX0ZJTFRFUiA/IHRoaXMudm0uY3VycmVudENhdElkKCkgOiBudWxsLCBvZmZzZXQsIGxpbWl0KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bUNvdXJzZXMgPSB0aGlzLnZtLmNvdXJzZXNPcmRlcigpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1Db3Vyc2VzIDwgMSB8fCAhdGhpcy52bS5oYXNNb3JlQ291cnNlcygpIHx8IHRoaXMudm0uaXNMb2FkaW5nKCkpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjYXJkSW5Gb2N1cyA9ICQoJyNjb3Vyc2UtJyArIHRoaXMudm0uY291cnNlc09yZGVyKClbbnVtQ291cnNlcyAtIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2FyZEluRm9jdXNPZmZzZXQgPSAkY2FyZEluRm9jdXMub2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRjYXJkSW5Gb2N1c09mZnNldCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gdGhpcy4kd2luZG93LnNjcm9sbFRvcCgpICsgdGhpcy4kd2luZG93LmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRjYXJkSW5Gb2N1c09mZnNldC50b3AgPCBjdXJyZW50U2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlQ291cnNlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJPYmouJHdpbmRvdy5vbignc2Nyb2xsJywgXy50aHJvdHRsZShjb250cm9sbGVyT2JqLm9uU2Nyb2xsLmJpbmQoY29udHJvbGxlck9iaiksIDUwMCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXJPYmo7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlldzogZnVuY3Rpb24gdmlldyhjdHJsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcmRzTGlzdCA9IHJlbmRlckNhcmRzTGlzdChjdHJsKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gcmVuZGVyRmlsdGVyKGN0cmwpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gbSgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAnY29uZmlnJzogdG9nZ2xlVG9vbHRpcFxuICAgICAgICAgICAgICAgIH0sIGN0cmwudm0uaXNMb2FkaW5nKCkgPyBjYXJkc0xpc3QuY29uY2F0KHJlbmRlckxvYWRpbmdJbmRpY2F0aW9uKGN0cmwpKSA6IGNhcmRzTGlzdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtmaWx0ZXIsIGNvbnRlbnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuXG4gICAgQ2FyZHNDb21wb25lbnQuZ2V0U2F2ZWRGaWx0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHNhdmVkRmlsdGVyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19LRVkpKTtcblxuICAgICAgICBpZiAoc2F2ZWRGaWx0ZXIgPT09IG51bGwgfHwgc2F2ZWRGaWx0ZXJbJ2NvdXJzZXNfZmlsdGVyJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gaWYgdXNlciBoYXMgb25seSBvbmUgbGVhcm5pbmcgY2F0ZWdvcnksIGRlZmF1bHQgdG8gdGhhdCBjYXRlZ29yeSBpbnN0ZWFkIG9mIG1vc3QgcmVjZW50XG4gICAgICAgICAgICBpZiAoTS5kYXRhLmxlYXJuaW5nX2NhdGVnb3JpZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgc2F2ZWRGaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICdjb3Vyc2VzX2ZpbHRlcic6ICdsZWFybmluZycsXG4gICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IE0uZGF0YS5sZWFybmluZ19jYXRlZ29yaWVzWzBdLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2F2ZWRGaWx0ZXIgPSB7ICdjb3Vyc2VzX2ZpbHRlcic6ICdpbml0aWFsJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc2F2ZWRGaWx0ZXJbJ2xlYXJuaW5nX2NhdGVnb3JpZXMnXSA9IE0uZGF0YS5sZWFybmluZ19jYXRlZ29yaWVzO1xuICAgICAgICBDYXJkc0NvbXBvbmVudC5zYXZlZEZpbHRlcihzYXZlZEZpbHRlcik7XG5cbiAgICAgICAgcmV0dXJuIHNhdmVkRmlsdGVyO1xuICAgIH07XG5cbiAgICBDYXJkc0NvbXBvbmVudC5zYXZlZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTFNfS0VZLCAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkoZmlsdGVyKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXJkc0NvbXBvbmVudDtcbn07XG5cbn0se1wiMVwiOjEsXCI0XCI6NCxcIjVcIjo1fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoQ2xhc3MsIF8sICQsIE0sIG0sIHNwcmludGYsIGRhdGV0aW1lKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoIV8uaGFzKE0sICdkYXNoYm9hcmQnKSkgTS5kYXNoYm9hcmQgPSB7fTtcblxuICAgIE0uZGFzaGJvYXJkLkNvdXJzZVByb2dyZXNzRmV0Y2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTS5kYXRhLmNhdF9yZXZpZXdfbnVtcyA9IHt9O1xuXG4gICAgICAgIHZhciBDYXJkc0NvbXBvbmVudCA9IHJlcXVpcmUoMikoJCwgTSwgbSwgXywgc3ByaW50ZiwgZGF0ZXRpbWUpLFxuICAgICAgICAgICAgRmV0Y2hlciA9IHJlcXVpcmUoNCkoJCwgTSwgbSwgXyk7XG5cbiAgICAgICAgdmFyIHNhdmVkRmlsdGVyID0gQ2FyZHNDb21wb25lbnQuZ2V0U2F2ZWRGaWx0ZXIoKSxcbiAgICAgICAgICAgIGNvbnRhaW5lciA9ICQoJy5qcy1jb3Vyc2UtY2FyZHMtY29tcG9uZW50JylbMF07XG5cbiAgICAgICAgdmFyIGNhcmRzQ29tcG9uZW50ID0gQ2FyZHNDb21wb25lbnQoc2F2ZWRGaWx0ZXIpO1xuICAgICAgICBNLmRhc2hib2FyZC5jYXJkc0NvbXBvbmVudCA9IG0ubW91bnQoY29udGFpbmVyLCBjYXJkc0NvbXBvbmVudCk7XG5cbiAgICAgICAgLy8gZmV0Y2ggY291cnNlc1xuICAgICAgICBGZXRjaGVyLmZldGNoQ291cnNlcyhzYXZlZEZpbHRlclsnY291cnNlc19maWx0ZXInXSwgc2F2ZWRGaWx0ZXJbJ2NhdGVnb3J5X2lkJ10pLnRoZW4obS5lbmRDb21wdXRhdGlvbik7XG4gICAgfTtcbn0pKENsYXNzLCBfLCBqUXVlcnksIE1FTVJJU0UsIG0sIHNwcmludGYsIGRhdGV0aW1lKTtcblxufSx7XCIyXCI6MixcIjRcIjo0fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCQsIE0sIG0sIF8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmZXRjaENvdXJzZXM6IGZ1bmN0aW9uIGZldGNoQ291cnNlcyhjdXJyZW50RmlsdGVyLCBjdXJyZW50Q2F0SWQpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7XG4gICAgICAgICAgICB2YXIgbGltaXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDQ7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50RmlsdGVyID09PSAnaW5pdGlhbCcpIGN1cnJlbnRGaWx0ZXIgPSAnbW9zdF9yZWNlbnQnO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjb3Vyc2VzX2ZpbHRlcjogY3VycmVudEZpbHRlcixcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICBsaW1pdDogbGltaXQsXG5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbnVtYmVyIG9mIHdvcmRzIHRvIHJldmlld2VkIG9uIHRoaXMgY2F0ZWdvcnkgaGFzbid0IGJlZW4gbG9hZGVkIHlldCxcbiAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGxvYWQgaXQgZm9yIHRoZSBmaXJzdCB0aW1lIGlmIHRoZSBzYXZlZCBmaWx0ZXIgaXMgYSBjYXRlZ29yeSB0aGF0IHVzZXIgaXMgbGVhcm5pbmdcbiAgICAgICAgICAgICAgICBnZXRfcmV2aWV3X2NvdW50OiBjdXJyZW50RmlsdGVyID09PSAnbGVhcm5pbmcnICYmICFfLmhhcyhNLmRhdGEuY2F0X3Jldmlld19udW1zLCBjdXJyZW50Q2F0SWQpICYmIGN1cnJlbnRDYXRJZCAhPT0gbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Q2F0SWQpIGRhdGFbJ2NhdGVnb3J5X2lkJ10gPSBjdXJyZW50Q2F0SWQ7XG4gICAgICAgICAgICByZXR1cm4gbS5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYWpheC9jb3Vyc2VzL2Rhc2hib2FyZC8nLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2F0SWQgJiYgZGF0YS5nZXRfcmV2aWV3X2NvdW50KSBNLmRhdGEuY2F0X3Jldmlld19udW1zW2N1cnJlbnRDYXRJZF0gPSByZXMudG9fcmV2aWV3X3RvdGFsO1xuICAgICAgICAgICAgICAgIE0uZGFzaGJvYXJkLmNhcmRzQ29tcG9uZW50LnNldFRvUmV2aWV3VG90YWwocmVzLnRvX3Jldmlld190b3RhbCk7XG4gICAgICAgICAgICAgICAgTS5kYXNoYm9hcmQuY2FyZHNDb21wb25lbnQuc2V0Q291cnNlcyhyZXMuY291cnNlcywgcmVzLmhhc19tb3JlX2NvdXJzZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoNiksIF9fZXNNb2R1bGU6IHRydWUgfTtcbn0se1wiNlwiOjZ9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBjb3JlID0gcmVxdWlyZSg3KTtcbnZhciAkSlNPTiA9IGNvcmUuSlNPTiB8fCAoY29yZS5KU09OID0geyBzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5IH0pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpO1xufTtcblxufSx7XCI3XCI6N31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHsgdmVyc2lvbjogJzIuNS4wJyB9O1xuaWYgKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpIF9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxufSx7fV19LHt9LFszXSk7XG4iLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE0pIHtcblxuICAgIHZhciBTaWRlYmFyR29hbENvdW50ZG93biA9IGZ1bmN0aW9uKHRpbWVUaWxsTWlkbmlnaHQpIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlldzogZnVuY3Rpb24gKGN0cmwpIHtcblxuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbihjdHJsLnRpbWVUaWxsTWlkbmlnaHQoKSwgJ3NlY29uZHMnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBtKCcuc2lkZWJhci1ib3guZ29hbC1jb3VudGRvd24nLCBbXG4gICAgICAgICAgICAgICAgICAgIG0oJy5jb3VudGRvd24taGVhZGVyJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgbSgnc3Bhbi5oZWFkZXItaW1nLWNvbnRhaW5lcicsIG0oJ3NwYW4uaGVhZGVyLWltZycpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG0oJ3NwYW4uaGVhZGVyLXRleHQnLCBfdCgnU3RyZWFrIENsb2NrJykpXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICBtKCcuY291bnRkb3duLWJvZHknLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBtKCdzcGFuLmNvdW50ZG93bi10ZXh0JywgX3QoJ1RpbWUgbGVmdCB0byBjb21wbGV0ZSB5b3VyIGRhaWx5IGdvYWxzJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbSgnc3Bhbi5jb3VudGRvd24tZHVyYXRpb24nLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSgnc3Bhbi50aW1lLWJsb2NrJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKCdzcGFuLnRpbWUtbnVtJywgZHVyYXRpb24uZ2V0KCdob3VycycpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSgnc3Bhbi50aW1lLXRleHQnLCBfdCgnaG91cnMnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKCdzcGFuLnRpbWUtYmxvY2snLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0oJ3NwYW4udGltZS1udW0nLCBkdXJhdGlvbi5nZXQoJ21pbnV0ZXMnKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0oJ3NwYW4udGltZS10ZXh0JywgX3QoJ21pbnMnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgIG0oJy5zaWRlYmFyLW1haW4tYnRuJywgbSgnYS5zaW1wbGVbaHJlZj1cIi9zZXR0aW5ncy9cIl0nLCBfdCgnQ2hhbmdlIHRpbWV6b25lJykpKVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVUaWxsTWlkbmlnaHQgPSBtLnByb3AodGltZVRpbGxNaWRuaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIE0ucmVuZGVyZXIucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm0tc2lkZWJhci1nb2FsLWNvdW50ZG93blwiKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGN0cmwgPSBtLm1vdW50KGNvbnRhaW5lciwgbmV3IFNpZGViYXJHb2FsQ291bnRkb3duKE0uZGF0YS50aW1lX3RpbGxfbWlkbmlnaHQpKTtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZUxlZnQgPSBjdHJsLnRpbWVUaWxsTWlkbmlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWVMZWZ0IDw9IDApIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIGVsc2UgY3RybC50aW1lVGlsbE1pZG5pZ2h0KGN1cnJlbnRUaW1lTGVmdCAtIDYwKTtcbiAgICAgICAgICAgICAgICBtLnJlZHJhdygpO1xuICAgICAgICAgICAgfSwgMTAwMCAqIDYwKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfLCBNLCBtLCAkKSB7XG4gICAgdmFyICRjb250YWluZXIgPSAkKFwiI20tc2lkZWJhci1sZWFkZXJib2FyZFwiKTtcbiAgICB2YXIgbGVhZGVyYm9hcmQgPSBNLm5ld0xlYWRlcmJvYXJkKHtcbiAgICAgICAgZW5kUG9pbnQ6IFwiL2FqYXgvbGVhZGVyYm9hcmQvbWVtcGFscy9cIixcbiAgICAgICAgZnVsbEJvYXJkVXJsOiAnL2hvbWUvbGVhZGVyYm9hcmQvJyxcbiAgICAgICAgaG93TWFueTogNVxuICAgIH0pO1xuXG4gICAgTS5yZW5kZXJlci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKCRjb250YWluZXIubGVuZ3RoID4gMCkgbS5tb3VudCgkY29udGFpbmVyWzBdLCBsZWFkZXJib2FyZCk7XG4gICAgfSk7XG59O1xuXG59LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCQpIHtcbiAgICB2YXIgJHByb2YgPSAkKFwiLnNpZGViYXItcHJvZmlsZSAuY29udGVudC1zdGF0c1wiKSxcbiAgICAgICAgJG51bWJlciA9ICQoXCIuanMtbnVtXCIsICRwcm9mKSxcbiAgICAgICAgJHBoID0gJChcIi5qcy1wbGFjZWhvbGRlclwiLCAkcHJvZiksXG4gICAgICAgIGZvbnRTaXplID0gJG51bWJlci5jc3MoXCJmb250LXNpemVcIikucmVwbGFjZShcInB4XCIsIFwiXCIpO1xuXG4gICAgJC5lYWNoKCRudW1iZXIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0ID0gJCh0aGlzKTtcbiAgICAgICAgd2hpbGUgKCR0LndpZHRoKCkgPiAkdC5wYXJlbnQoKS53aWR0aCgpKSB7XG4gICAgICAgICAgICBmb250U2l6ZS0tO1xuICAgICAgICAgICAgJG51bWJlci5jc3MoXCJmb250LXNpemVcIiwgZm9udFNpemUgKyBcInB4XCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkcGguaGlkZSgpO1xuICAgICRudW1iZXIuc2hvdygpO1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKF8sIE0sIG0sIGRhdGV0aW1lKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc2lkZWJhclN0YXRzID0ge307XG5cbiAgICBzaWRlYmFyU3RhdHMuYW5hbHl0aWNzX3VybCA9IG0ucHJvcChcIi9ob21lL2xlYXJuaW5nLXN0YXRpc3RpY3MvXCIpO1xuICAgIHNpZGViYXJTdGF0cy5wcmVtaXVtX3VybCA9IG0ucHJvcChcIi9wcmVtaXVtLz9zb3VyY2U9ZGFzaGJvYXJkXCIpO1xuXG4gICAgc2lkZWJhclN0YXRzLnZpZXcgPSBmdW5jdGlvbiAoY3RybCkge1xuICAgICAgICB2YXIgc3RhdHMgPSBjdHJsLnN0YXRzKCk7XG5cbiAgICAgICAgcmV0dXJuIChNLnVzZXIuaXNfcHJlbWl1bSkgPyByZW5kZXJQcmVtaXVtVmlldyhzdGF0cykgOiByZW5kZXJOb25QcmVtaXVtVmlldyhzdGF0cyk7XG4gICAgfTtcblxuICAgIHNpZGViYXJTdGF0cy5jb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge3N0YXRzOiBtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy9hamF4L21ldHJpY3MvZGFzaGJvYXJkX3NpZGViYXJfc3RhdHMvJ1xuICAgICAgICB9KX07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlbmRlck5vblByZW1pdW1WaWV3KHN0YXRzKSB7XG4gICAgICAgIHZhciB1cmwgPSAnIycsXG4gICAgICAgICAgICBjbGFzc2VzID0gJ3ByZW1pdW0tdXBzZWxsLWJ0bicsXG4gICAgICAgICAgICBsaW5rVGV4dCA9IF90KCdkYXNoYm9hcmRfbW9kdWxlX3N0YXRzX2J1dHRvbicpO1xuXG4gICAgICAgIHZhciBjdGFMaW5rID0ge1xuICAgICAgICAgICAgaHJlZjogdXJsLFxuICAgICAgICAgICAgY2xhc3M6IGNsYXNzZXNcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgJHVwc2VsbE1vZGFsID0gJCgnI3N0YXRzLXVwc2VsbC1tb2RhbCcpO1xuICAgICAgICBjdGFMaW5rLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkdXBzZWxsTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAkdXBzZWxsTW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgY3RhQnV0dG9uID0gbSgnLnNpZGViYXItbWFpbi1idG4ucHJlbWl1bS1saW5rJyxcbiAgICAgICAgICAgIG0oJ2EnLCBjdGFMaW5rLCBsaW5rVGV4dClcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gW20oJy5zaWRlYmFyLWJveC5zaWRlYmFyLXByZW1pdW0nLFxuICAgICAgICAgICAgbSgnLnByZW1pdW0taGVhZGVyJywgW1xuICAgICAgICAgICAgICAgIG0oJ3NwYW4ucHJlbWl1bS1pbWFnZScpLFxuICAgICAgICAgICAgICAgIG0oJ3NwYW4ucHJlbWl1bS10ZXh0JywgX3QoJ2Rhc2hib2FyZF9tb2R1bGVfc3RhdHNfaGVhZGVyJykpXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIG0oJ3NwYW4ucHJlbWl1bS1zdGF0cy1pbWFnZScpLFxuICAgICAgICAgICAgY3RhQnV0dG9uXG4gICAgICAgICldO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlclByZW1pdW1WaWV3KHN0YXRzKSB7XG4gICAgICAgIC8vIFRPRE86IHNlcmlhbGl6ZSB0aGlzIHByb3Blcmx5IHNvIHdlIGRvbid0IGhhdmUgdG8gbnVsbCBjaGVja1xuICAgICAgICBpZiAoc3RhdHMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciB1cmwgPSBzaWRlYmFyU3RhdHMuYW5hbHl0aWNzX3VybCgpLFxuICAgICAgICAgICAgdGV4dCA9IF90KFwiTW9yZVwiKSxcbiAgICAgICAgICAgIGNsYXNzZXMgPSBcInNpbXBsZVwiLFxuICAgICAgICAgICAgY2VsbFdyYXBwZXJMZW5ndGggPSA3LFxuICAgICAgICAgICAgc3RyZWFrTGVuZ3RoID0gMzAsXG4gICAgICAgICAgICBzdHJlYWsgPSBbXSxcbiAgICAgICAgICAgIGNlbGxzVGVtcCA9IFtdLFxuICAgICAgICAgICAgc3RhcnRpbmdEYXkgPSAxLCAvLyAwOiBzdW5kYXksIDE6IG1vbmRheVxuICAgICAgICAgICAgc2hvd0RheUxldHRlciA9IHRydWUsXG4gICAgICAgICAgICBob3Jpem9udGFsID0gdHJ1ZSxcbiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgZGF0ZVN0ciA9IGRhdGVTdHJpbmcoZGF0ZSksXG4gICAgICAgICAgICBsZXZlbFRocmVzaG9sZHMgPSBjYWxjdWxhdGVUaHJlc2hvbGRzKHN0YXRzLnN0cmVha19kYXRhKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmVha0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gKHN0YXRzLnN0cmVha19kYXRhW2RhdGVTdHJdID09PSB1bmRlZmluZWQpID8gMCA6IHN0YXRzLnN0cmVha19kYXRhW2RhdGVTdHJdLFxuICAgICAgICAgICAgICAgIHdlZWtkYXlOdW1iZXIgPSBkYXRlLmdldERheSgpLFxuICAgICAgICAgICAgICAgIGRheSA9IGRhdGV0aW1lLmdldFdlZWtkYXlOYW1lKHdlZWtkYXlOdW1iZXIpLFxuICAgICAgICAgICAgICAgIGRheU51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpLFxuICAgICAgICAgICAgICAgIG1vbnRoID0gZGF0ZXRpbWUuZ2V0TW9udGhOYW1lKGRhdGUuZ2V0TW9udGgoKSksXG4gICAgICAgICAgICAgICAgdGl0bGUgPSBfdCgnX19ldmVudHNfXyBldmVudHMgb24gX19kYXlfXyBfX251bV9fLCBfX21vbnRoX18nLCB7ZXZlbnRzOiBldmVudHMsIGRheTogZGF5LCBudW06IGRheU51bWJlciwgbW9udGg6IG1vbnRofSksXG4gICAgICAgICAgICAgICAgbGV2ZWwgPSBcIlwiO1xuXG4gICAgICAgICAgICBpZiAoZXZlbnRzID4gbGV2ZWxUaHJlc2hvbGRzWzBdKSBsZXZlbCA9IFwiaGlnaFwiO1xuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRzID4gbGV2ZWxUaHJlc2hvbGRzWzFdKSBsZXZlbCA9IFwiYXZlcmFnZVwiO1xuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRzID4gMCkgbGV2ZWwgPSBcImxvd1wiO1xuXG4gICAgICAgICAgICB2YXIgY2VsbCA9IG0oXCJzcGFuLmNlbGxcIiwge1wiZGF0YS1kYXRlXCI6IGRhdGVTdHIsIFwiZGF0YS1ldmVudHNcIjogZXZlbnRzLCBcInRpdGxlXCI6IHRpdGxlLCBcImNsYXNzXCI6IGxldmVsfSk7XG5cbiAgICAgICAgICAgIGNlbGxzVGVtcC51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICBkYXlPZldlZWs6IHdlZWtkYXlOdW1iZXIsXG4gICAgICAgICAgICAgICAgY29udGVudDogY2VsbFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXlOdW1iZXIgLSAxKTtcbiAgICAgICAgICAgIGRhdGVTdHIgPSBkYXRlU3RyaW5nKGRhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRlbXAgPSBbXSxcbiAgICAgICAgICAgIHdyYXBwZXIgPSBbXTtcblxuICAgICAgICBpZiAoc2hvd0RheUxldHRlciAmJiBjZWxsV3JhcHBlckxlbmd0aCA9PT0gNykgc3RyZWFrLnB1c2goZGF5SW5pdGlhbHMoc3RhcnRpbmdEYXkpKTtcblxuICAgICAgICB3aGlsZSAoXy5zaXplKGNlbGxzVGVtcCkpIHtcbiAgICAgICAgICAgIHZhciBjZWxsRGF0YSA9IGNlbGxzVGVtcC5zaGlmdCgpO1xuXG4gICAgICAgICAgICBpZiAoY2VsbERhdGEuZGF5T2ZXZWVrICE9PSBzdGFydGluZ0RheSkgdGVtcC5wdXNoKGNlbGxEYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9mb3IgdGhlIGluaXRpYWwsIChtb3N0IGxpa2VseSkgbm90IGZ1bGwgd2Vla1xuICAgICAgICAgICAgICAgIHdoaWxlIChfLnNpemUodGVtcCkgPCBjZWxsV3JhcHBlckxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW1wdHkgPSBtKFwic3Bhbi5jZWxsLmVtcHR5XCIpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wLnVuc2hpZnQoZW1wdHkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHdyYXBwZXIgPSBbbShcIi5jZWxsV3JhcHBlclwiLCB0ZW1wKV07XG4gICAgICAgICAgICAgICAgc3RyZWFrLnB1c2god3JhcHBlcik7XG4gICAgICAgICAgICAgICAgdGVtcCA9IFtjZWxsRGF0YS5jb250ZW50XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0cmVhay5wdXNoKFttKFwiLmNlbGxXcmFwcGVyXCIsIHRlbXApXSk7XG5cbiAgICAgICAgcmV0dXJuIFttKFwiLnNpZGViYXItYm94LnNpZGViYXItcHJlbWl1bVwiLFxuICAgICAgICAgICAgICAgICAgICBtKFwiLnByZW1pdW0taGVhZGVyXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJzcGFuLnByZW1pdW0taW1hZ2VcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBtKFwic3Bhbi5wcmVtaXVtLXRleHRcIiwgX3QoXCJQcm9cIikpXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICBtKFwiLnByZW1pdW0tY29udGVudFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBtKFwiLnRleHRcIiwgX3QoXCJUaGlzIG1vbnRoJ3MgbGVhcm5pbmcgZ3JhcGhcIikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbShcImEubW9udGhseVN0cmVha1wiLCB7aHJlZjogdXJsLCBjbGFzczogaG9yaXpvbnRhbCA/IFwiaG9yaXpvbnRhbFwiIDogXCJcIn0sIHN0cmVhayksXG4gICAgICAgICAgICAgICAgICAgICAgICBtKFwicC50ZXh0XCIsIF90KFwiQmVzdCBzdHJlYWtcIikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbShcInAuZW1waGFzaXplZFwiLCBfdCgnX19zdHJlYWtfXyBkYXlzJywge3N0cmVhazogc3RhdHMubG9uZ2VzdF9zdHJlYWt9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBtKFwicC50ZXh0XCIsIF90KFwiTGFzdCA3IGRheXNcIikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbShcInAuZW1waGFzaXplZFwiLCBzdGF0cy50aW1lX3NwZW50KVxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgbShcIi5zaWRlYmFyLW1haW4tYnRuLnByZW1pdW0tbGlua1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbShcImFcIiwge2hyZWY6IHVybCwgY2xhc3M6IGNsYXNzZXN9LCB0ZXh0KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF5SW5pdGlhbHMoc3RhcnRpbmdEYXkpIHtcbiAgICAgICAgdmFyIGRheXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwdHJUZW1wID0gc3RhcnRpbmdEYXkgKyBpLFxuICAgICAgICAgICAgICAgIHB0ciA9IChwdHJUZW1wID4gNikgPyAwIDogcHRyVGVtcCxcbiAgICAgICAgICAgICAgICBjZWxsID0gbShcInNwYW4uY2VsbC5kYXlJbml0aWFsXCIsIGRhdGV0aW1lLmdldFdlZWtkYXlOYW1lKHB0ciwgdHJ1ZSkpO1xuXG4gICAgICAgICAgICBkYXlzLnB1c2goY2VsbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW20oXCIuY2VsbFdyYXBwZXJcIiwgZGF5cyldO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRocmVzaG9sZHMoZGF0YSkge1xuICAgICAgICBpZiAoIV8uc2l6ZShkYXRhKSkgcmV0dXJuIFswLCAwXTtcblxuICAgICAgICB2YXIgdmFsdWVzID0gXy52YWx1ZXMoZGF0YSksXG4gICAgICAgICAgICBtYXggPSBfLm1heCh2YWx1ZXMpLFxuICAgICAgICAgICAgaGlnaCA9IE1hdGgucm91bmQoMC43NSAqIG1heCksXG4gICAgICAgICAgICBhdmVyYWdlID0gTWF0aC5yb3VuZCgwLjUgKiBtYXgpO1xuXG4gICAgICAgIHJldHVybiBbaGlnaCwgYXZlcmFnZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZVN0cmluZyhkYXRlKSB7XG4gICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgICAgZGF5ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcblxuICAgICAgICBpZiAoXy5zaXplKG1vbnRoKSA8IDIpIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICAgICAgaWYgKF8uc2l6ZShkYXkpIDwgMikgZGF5ID0gXCIwXCIgKyBkYXk7XG5cbiAgICAgICAgcmV0dXJuIFt5ZWFyICsgXCItXCIgKyBtb250aCArIFwiLVwiICsgZGF5XTtcbiAgICB9XG5cbiAgICBNLnJlbmRlcmVyLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtLXNpZGViYXItcHJlbWl1bVwiKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciAhPT0gbnVsbCkgbS5tb3VudChjb250YWluZXIsIHNpZGViYXJTdGF0cyk7XG4gICAgfSk7XG59O1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoXywgTSwgbSwgJCkge1xuICAgIHJlcXVpcmUoMikoXywgTSwgbSwgJCwgSGFuZGxlYmFycyk7XG4gICAgcmVxdWlyZSg0KShfLCBNLCBtLCBkYXRldGltZSk7XG4gICAgcmVxdWlyZSgzKSgkKTtcbiAgICByZXF1aXJlKDEpKE0pO1xuICAgIHJlcXVpcmUoNikoJCwgJ2Rhc2hib2FyZCcpO1xuICAgIFxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcqW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKTtcbiAgICB9KTtcbn0pKF8sIE1FTVJJU0UsIG0sIGpRdWVyeSk7XG5cbn0se1wiMVwiOjEsXCIyXCI6MixcIjNcIjozLFwiNFwiOjQsXCI2XCI6Nn1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigkLCBwYWdlTmFtZSkge1xuXG4gIHZhciAkcHJvbW90aW9uTW9kYWwgPSAkKCcjcHJvbW90aW9uLW1vZGFsJyk7XG4gIGlmICgkcHJvbW90aW9uTW9kYWwpIHtcbiAgICAkcHJvbW90aW9uTW9kYWwub24oJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICB2YXIgdXBzZWxsX25hbWUgPSAkcHJvbW90aW9uTW9kYWwuZGF0YSgndHJhY2tpbmctbmFtZScpO1xuXG4gICAgICBhbmFseXRpY3MudHJhY2soJ3Vwc2VsbF92aWV3ZWQnLCB7XG4gICAgICAgICd1cHNlbGxfbmFtZSc6IHVwc2VsbF9uYW1lLFxuICAgICAgICAnc291cmNlJzogcGFnZU5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgJHByb21vdGlvbk1vZGFsLm1vZGFsKCdzaG93Jyk7XG4gIH1cbn07XG5cblxufSx7fV19LHt9LFs1XSk7XG4iLCIoZnVuY3Rpb24oQ2xhc3MsIF8sICQsIE0pIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICghIF8uaGFzKE0sICdkYXNoYm9hcmQnKSkge1xuICAgICAgICBNLmRhc2hib2FyZCA9IHt9O1xuICAgIH1cblxuICAgIE0uZGFzaGJvYXJkLlVuZW5yb2xsaW5nTWFuYWdlciA9IENsYXNzLmNyZWF0ZSh7XG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRfb2JzZXJ2aW5nKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RhcnRfb2JzZXJ2aW5nIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5vbl91bmVucm9sbGVkID0gXy5iaW5kKHRoaXMub25fdW5lbnJvbGxlZCwgdGhpcyk7XG4gICAgICAgICAgICBfKE0uY291cnNlcykub24oJ3VuZW5yb2xsZWQnLCB0aGlzLm9uX3VuZW5yb2xsZWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uX3VuZW5yb2xsZWQgOiBmdW5jdGlvbiAoY291cnNlX2lkKSB7XG4gICAgICAgICAgICB2YXIgJGNvdXJzZSA9ICQoJ1tkYXRhLWNvdXJzZS1pZD1cIicgKyBjb3Vyc2VfaWQgKyAnXCJdJyk7XG5cbiAgICAgICAgICAgICRjb3Vyc2UuZmluZCgnW3RpdGxlXScpLnRvb2x0aXAoJ2Rlc3Ryb3knKTtcblxuICAgICAgICAgICAgJGNvdXJzZS5zbGlkZVVwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG59KShDbGFzcywgXywgalF1ZXJ5LCBNRU1SSVNFKTtcbiIsIihmdW5jdGlvbiAoJCwgTSwgXykge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIEdPQUxfTEVWRUxTID0gWzE1MDAsIDYwMDAsIDIwMDAwXTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBvbmUgc2luZ2xlIGdvYWwgaW4gdGhlIGRhc2hib2FyZFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIE0uR29hbCA9IGZ1bmN0aW9uIChjb3Vyc2VfaWQsIGltZ191cmwsIGNvdXJzZV9uYW1lLCBkYXRhLCBjb3Vyc2VfY29tcGxldGUsIGhlYWRlcl90ZXh0KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5jb3Vyc2VfaWQgPSBjb3Vyc2VfaWQ7XG4gICAgICAgIHRoaXMuaW1nX3VybCA9IGltZ191cmw7XG4gICAgICAgIHRoaXMuY291cnNlX25hbWUgPSBjb3Vyc2VfbmFtZTtcbiAgICAgICAgdGhpcy5oZWFkZXJfdGV4dCA9IGhlYWRlcl90ZXh0O1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmNvdXJzZV9jb21wbGV0ZSA9IGNvdXJzZV9jb21wbGV0ZTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAhXy5pc0VtcHR5KGRhdGEpO1xuXG4gICAgICAgIHRoaXMuc2hvd1BvcHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgTS5tb2RhbC5jb250ZW50KHtcbiAgICAgICAgICAgICAgICBtb2RhbElkOiBcImdvYWwtc2V0dGVyLXBvcHVwXCIsXG4gICAgICAgICAgICAgICAgc2hvd0hlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2hvd0Zvb3RlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgYmFja2Ryb3A6IHRydWUsXG4gICAgICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiZ29hbC1zZXR0ZXJcIixcbiAgICAgICAgICAgICAgICBzZWVUaHJ1OiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZW1vdmVPbkhpZGRlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVZhcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NvdXJzZV9pZCc6IHNlbGYuY291cnNlX2lkLFxuICAgICAgICAgICAgICAgICAgICAnaW1nX3VybCc6IHNlbGYuaW1nX3VybCxcbiAgICAgICAgICAgICAgICAgICAgJ2NvdXJzZV9uYW1lJzogc2VsZi5jb3Vyc2VfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcl90ZXh0JzogIXNlbGYuaGVhZGVyX3RleHQgPyBfdChcIlNldCBhIGRhaWx5IGdvYWwgLSBoaXQgeW91ciBnb2FsIGV2ZXJ5IGRheSB0byB3aW4gYm9udXNlcyFcIikgOiBzZWxmLmhlYWRlcl90ZXh0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VsZi5kYXRhLmdvYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHT0FMX0xFVkVMU1swXTpcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZmlyc3RcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHT0FMX0xFVkVMU1sxXTpcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2Vjb25kXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgR09BTF9MRVZFTFNbMl06XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnRoaXJkXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJChcIi5nb2FsLWNob2ljZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0ID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsID0gJHQuZGF0YUF0dHIoXCJsZXZlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5nb2FsLWNob2ljZVwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIuZG90XCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLmRvdFwiLCAkdCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSBnb2FsXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5nb2FsID0gR09BTF9MRVZFTFNbbGV2ZWxdO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNhdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdmlzdWFsIGZlZWRiYWNrIGZvciB1c2VyXG4gICAgICAgICAgICAgICAgICAgICR0LmZpbmQoJy5tYWluLXRleHQnKS5maXJzdCgpLnRleHQoXCJTYXZlZCFcIikuY3NzKCdjb2xvcicsICdyZ2IoMjU1LCAxMTcsIDEwNyknKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoTSwgJ2dhcmRlbicpKSBNLmdhcmRlbi5zZXNzaW9uX3BhcmFtcy5zaG93bl9nb2FsX3NldHRlciA9IHRydWU7XG4gICAgICAgICAgICB9LCB0aGlzLmhpZGRlbkNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhpZGVQb3B1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGdvYWxfc2V0dGVyLmNvbnRleHQgPT09IFwiZGFzaGJvYXJkXCIpIHtcbiAgICAgICAgICAgICAgICBNLmRhc2hib2FyZC5jYXJkc0NvbXBvbmVudC5zZXRHb2FsKHRoaXMuY291cnNlX2lkLCB0aGlzLmRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKFwiI2dvYWwtc2V0dGVyLXBvcHVwXCIpLmZhZGVPdXQoNDAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLm1vZGFsLWJhY2tkcm9wXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBtLnN0YXJ0Q29tcHV0YXRpb24oKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBcIi9hamF4L2NvdXJzZS9kYWlseS1nb2FsL1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsnY291cnNlX2lkJzogc2VsZi5jb3Vyc2VfaWR9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnBvaW50cyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5nb2FsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnN0cmVhayA9IDA7XG4gICAgICAgICAgICAgICAgICAgIChnb2FsX3NldHRlci5jb250ZXh0ID09PSBcImR1cmluZy1zZXNzaW9uXCIpID8gc2VsZi5oaWRlUG9wdXAoc2VsZi5yZWRpcmVjdEhvbWUpIDogc2VsZi5oaWRlUG9wdXAoc2VsZi5yZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICBtLmVuZENvbXB1dGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7Y291cnNlX2lkOiBzZWxmLmNvdXJzZV9pZCwgZGFpbHlfZ29hbDogc2VsZi5kYXRhLmdvYWx9O1xuXG4gICAgICAgICAgICBtLnN0YXJ0Q29tcHV0YXRpb24oKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBcIi9hamF4L2NvdXJzZS9kYWlseS1nb2FsL1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmRhdGEucG9pbnRzID09PSAndW5kZWZpbmVkJykgc2VsZi5kYXRhLnBvaW50cyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5kYXRhLmdvYWwgPT09ICd1bmRlZmluZWQnKSBzZWxmLmRhdGEuZ29hbCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hY3RpdmUgPSBzZWxmLmRhdGEuZ29hbCA+IDA7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5nb2FsX2FjaGlldmVkID0gcmVzcC5nb2FsX2FjaGlldmVkO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEuc3RyZWFrID0gcmVzcC5zdHJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnb2FsX3NldHRlci5jb250ZXh0ID09PSBcImR1cmluZy1zZXNzaW9uXCIpIHNlbGYuaGlkZVBvcHVwKHNlbGYucmVkaXJlY3RIb21lKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ29hbF9zZXR0ZXIuY29udGV4dCA9PT0gXCJlbmQtc2Vzc2lvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVQb3B1cChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvYWxfc2V0dGVyLmFuaW1hdGVfYmFyKHNlbGYuY291cnNlX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugc2VsZi5oaWRlUG9wdXAoc2VsZi5yZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICBtLmVuZENvbXB1dGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRpcmVjdEhvbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9ob21lXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZ29hbF9zZXR0ZXIuY29udGV4dCA9PT0gXCJlbmQtc2Vzc2lvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyICRib3ggPSAkKFwiLmNvdXJzZV9ib3ggLmJvdHRvbVwiKSxcbiAgICAgICAgICAgICAgICAgICAgJHVwcGVyID0gJChcIi51cHBlclwiLCAkYm94KSxcbiAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzID0gJChcIi5wcm9ncmVzc1wiLCAkYm94KSxcbiAgICAgICAgICAgICAgICAgICAgJHRleHQgPSAkKFwiLnRleHRcIiwgJHVwcGVyKSxcbiAgICAgICAgICAgICAgICAgICAgJHBvaW50cyA9ICQoXCIuY291cnNlX3BvaW50c1wiLCAkdXBwZXIpLFxuICAgICAgICAgICAgICAgICAgICAkZWRpdCA9ICQoXCIuZWRpdFwiLCAkdXBwZXIpLFxuICAgICAgICAgICAgICAgICAgICAkYmFyID0gJChcIi5iYXJcIiwgJHByb2dyZXNzKTtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAkYm94LmFkZENsYXNzKFwiZ29hbC1zZXR0ZXItc2hhZG93XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChNLmdhcmRlbi5zZXNzaW9uX2RhdGEuaW5pdGlhbF9zZXNzaW9uX3BvaW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHVwcGVyLmFkZCgkcHJvZ3Jlc3MpLmFkZCgkYmFyKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBNLmdvYWxfc2V0dGVyLmFuaW1hdGVfYmFyKE0uZ2FyZGVuLnNlc3Npb25fcGFyYW1zLmNvdXJzZV9pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY291cnNlX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IF90KFwiQ291cnNlIGNvbXBsZXRlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGV4dC50ZXh0KHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHVwcGVyLmFkZENsYXNzKFwiY2VudGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBvaW50cy5hZGQoJGVkaXQpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuZGF0YS5nb2FsX2FjaGlldmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IF90KFwiVG9kYXkncyBnb2FsIGNvbXBsZXRlIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmRhdGEuc3RyZWFrID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gXCI8c3BhbiBjbGFzcz0nc3RyZWFrX2luZm8nPlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gcGx1cmFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdChcIkN1cnJlbnQgc3RyZWFrOiAlKGNvdW50KWQgZGF5XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdChcIkN1cnJlbnQgc3RyZWFrOiAlKGNvdW50KWQgZGF5c1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnN0cmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBcIjwvc3Bhbj5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZXh0Lmh0bWwodGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdXBwZXIuYWRkQ2xhc3MoXCJkb25lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBvaW50cy5hZGQoJGVkaXQpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRwdHMgPSAkKFwiLnB0c1wiLCAkYm94KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ29hbCA9ICQoXCIuZ29hbFwiLCAkYm94KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gX3QoXCJUb2RheSdzIGdvYWw6XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGV4dC50ZXh0KHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHB0cy50ZXh0KHNlbGYuZGF0YS5wb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGdvYWwudGV4dChzZWxmLmRhdGEuZ29hbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoKGNvdXJzZV9jb21wbGV0ZSB8fCBzZWxmLmRhdGEuZ29hbF9hY2hpZXZlZCkgJiYgTS5nYXJkZW4uc2Vzc2lvbl9kYXRhLnNlc3Npb24uZ29hbF9wb2ludHMgPj0gc2VsZi5kYXRhLnBvaW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGJhci5hZGRDbGFzcyhcIm5vdHJhbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkdXBwZXIuYWRkKCRwcm9ncmVzcykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIGdvYWxfc2V0dGVyID0gTS5nb2FsX3NldHRlciA9IHt9O1xuXG4gICAgJC5leHRlbmQodHJ1ZSwgTS5nb2FsX3NldHRlciwge1xuXG4gICAgICAgIGdvYWxzOiB7fSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgZ29hbF9zZXR0ZXIuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICBnb2FsX3NldHRlci5yZWdpc3RlckV2ZW50cygpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0RmlyZXdvcmtzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIE0uZmlyZXdvcmtzLmluaXQoKTtcblxuICAgICAgICAgICAgdmFyIGNsb3NlQnRuID0gXCI8ZGl2IGNsYXNzPSdmaXJld29ya3MtY2xvc2UtYnRuIGpzLWNsb3NlLWZpcmV3b3Jrcyc+eDwvZGl2PlwiO1xuICAgICAgICAgICAgJChcImJvZHlcIikuYXBwZW5kKGNsb3NlQnRuKTtcbiAgICAgICAgICAgICQoXCIuanMtY2xvc2UtZmlyZXdvcmtzXCIpLmZhZGVJbigyMDAwKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIE0uZmlyZXdvcmtzLmNsb3NlRmlyZXdvcmtzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhbmltYXRlX2JhcjogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIE0uZ2FyZGVuLnNlc3Npb25fZGF0YS5zZXNzaW9uLmdvYWxfcG9pbnRzID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5nb2Fsc1tpZF0uZGF0YSxcbiAgICAgICAgICAgICAgICBjb3Vyc2VfY29tcGxldGUgPSB0aGlzLmdvYWxzW2lkXS5jb3Vyc2VfY29tcGxldGUsXG4gICAgICAgICAgICAgICAgJGJveCA9ICQoXCIuY291cnNlX2JveCAuYm90dG9tXCIpLFxuICAgICAgICAgICAgICAgICRiYXIgPSAkKFwiLmJhclwiLCAkYm94KSxcbiAgICAgICAgICAgICAgICAkc3BhcmtsZSA9ICQoXCIuc3BhcmtsZVwiLCAkYm94KTtcblxuICAgICAgICAgICAgLy9pZiB0aGUgY291cnNlIGdldHMgY29tcGxldGVkIG9yIGdvYWwgYWNoaWV2ZWQgZHVyaW5nIHRoZSBjdXJyZW50IHNlc3Npb25cbiAgICAgICAgICAgIGlmICgoY291cnNlX2NvbXBsZXRlIHx8IGRhdGEuZ29hbF9hY2hpZXZlZCkgJiYgTS5nYXJkZW4uc2Vzc2lvbl9kYXRhLnNlc3Npb24uZ29hbF9wb2ludHMgPCBkYXRhLmdvYWwpIHtcblxuICAgICAgICAgICAgICAgIC8vd2hlbiBjb3Vyc2UgaXMgY29tcGxldGVkIGJlZm9yZSBnb2FsIGlzIGFjaGlldmVkLCBjdXJyZW50IHNlc3Npb24gZG9lc24ndFxuICAgICAgICAgICAgICAgIC8veWV0IHNob3cgdGhlIGZ1bGwgcG9pbnRzIChuZXh0IG9uZSBkb2VzIGF1dG9tYXRpY2FsbHkpXG4gICAgICAgICAgICAgICAgJGJhci53aWR0aChcIjEwMCVcIik7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmluY2x1ZGUoWzIsIDQsIDUsIDEwXSwgZGF0YS5zdHJlYWspICYmICFNLnVzZXIuaXNfcHJlbWl1bSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTS5zaG93bkdvYWxVcHNlbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgTS5nb2FsX3NldHRlci5pbml0RmlyZXdvcmtzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0uZ29hbF9zZXR0ZXIuc2hvd1Byb21vUG9wdXAoZGF0YS5zdHJlYWspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzcGFya2xlLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRib3guYWRkQ2xhc3MoXCJib3VuY2VcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5wb2ludHMgPiAwICYmIGRhdGEuZ29hbCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gKChkYXRhLnBvaW50cyAvIGRhdGEuZ29hbCkgKiAxMDApLFxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlID0gKCh0bXAgPiAxMDApID8gMTAwIDogdG1wKSArIFwiJVwiO1xuICAgICAgICAgICAgICAgICRiYXIud2lkdGgocGVyY2VudGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgJGJhci5oaWRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dQcm9tb1BvcHVwOiBmdW5jdGlvbiAoc3RyZWFrKSB7XG4gICAgICAgICAgICB2YXIgb2ZmZXJQZXJjZW50YWdlID0gKF8uaW5jbHVkZShbMiwgNCwgNV0sIHN0cmVhaykpID8gMjAgOiA1MCxcbiAgICAgICAgICAgICAgICBvZmZlckNvZGUgPSBNLkNPTlNUQU5UUy5ESVNDT1VOVF9DT0RFU1tvZmZlclBlcmNlbnRhZ2VdLFxuICAgICAgICAgICAgICAgIHNlc3Npb25UeXBlID0gTS5nYXJkZW4uZ2V0U2Vzc2lvblR5cGUoKSxcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSAnP29mZmVyPScgKyBvZmZlckNvZGUgKyAnJnVwc2VsbF9uYW1lPXN0cmVha191cGdyYWRlJnNvdXJjZT1lb3Mmc2Vzc2lvbl90eXBlPScgKyBzZXNzaW9uVHlwZTtcblxuICAgICAgICAgICAgTS5tb2RhbC5jb250ZW50KHtcbiAgICAgICAgICAgICAgICBtb2RhbElkOiBcImVuZC1zZXNzaW9uLXByb21vLXBvcHVwXCIsXG4gICAgICAgICAgICAgICAgc2hvd0hlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2hvd0Zvb3RlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgYmFja2Ryb3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcInNob3ctc3RyZWFrLXByb21vXCIsXG4gICAgICAgICAgICAgICAgc2VlVGhydTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVtb3ZlT25IaWRkZW46IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVWYXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvcHJlbWl1bS9wYXkvYW5udWFsL1wiICsgcGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBtYWluVGV4dDogX3QoXCJDb25ncmF0dWxhdGlvbnMhXCIpLFxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBvZmZlclBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHN1YlRleHQ6IF90KFwiWW91J3ZlIGhpdCBhIF9fbnVtRGF5X18gZGF5IGdvYWwgc3RyZWFrIVwiLCB7bnVtRGF5OiBzdHJlYWt9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2hhZG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBmYWRlVGltZTogXCJzbG93XCJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGdvYWxQb3B1cCA9ICQoXCIjZW5kLXNlc3Npb24tcHJvbW8tcG9wdXBcIik7XG5cbiAgICAgICAgICAgICAgICAkKFwiLnNraXBcIiwgJGdvYWxQb3B1cCkub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgTS5maXJld29ya3MuY2xvc2VGaXJld29ya3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQoXCIuYnRuLXByb21vXCIsICRnb2FsUG9wdXApLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoaWRlTW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkZ29hbFBvcHVwID0gJChcIiNlbmQtc2Vzc2lvbi1wcm9tby1wb3B1cFwiKTtcblxuICAgICAgICAgICAgJGdvYWxQb3B1cC5mYWRlT3V0KDQwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJGdvYWxQb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZ2lzdGVyRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGRvYyA9ICQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgaWYgKGdvYWxfc2V0dGVyLmNvbnRleHQgPT09IFwiZGFzaGJvYXJkXCIpIHtcbiAgICAgICAgICAgICAgICAkZG9jLm9uKFwiY2xpY2tcIiwgJy50dXJuLW9mZicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKFwidGFyZ2V0XCIpO1xuICAgICAgICAgICAgICAgICAgICBnb2FsX3NldHRlci5nb2Fsc1tpZF0ub2ZmKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdvYWxfc2V0dGVyLmNvbnRleHQgPT09IFwiZW5kLXNlc3Npb25cIikge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE0uZ2FyZGVuLnNlc3Npb25fcGFyYW1zLmNvdXJzZV9pZDtcbiAgICAgICAgICAgICAgICAkZG9jLm9uKFwiY2xpY2tcIiwgJy5lZGl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnb2FsX3NldHRlci5nb2Fsc1tpZF0uc2hvd1BvcHVwKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJGRvYy5vbihcImNsaWNrXCIsICcudHVybi1vZmYnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdvYWxfc2V0dGVyLmdvYWxzW2lkXS5vZmYoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChNLmdhcmRlbi5zZXNzaW9uX2RhdGEuaW5pdGlhbF9zZXNzaW9uX3BvaW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLmVuZF9vZl9zZXNzaW9uIC5uZXh0X2J0blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ29hbF9zZXR0ZXIuZ29hbHNbaWRdLnNob3dQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdvYWxfc2V0dGVyLmNvbnRleHQgPT09IFwiZHVyaW5nLXNlc3Npb25cIikge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE0uZ2FyZGVuLnNlc3Npb25fcGFyYW1zLmNvdXJzZV9pZDtcbiAgICAgICAgICAgICAgICBNLmdhcmRlbi5zZXNzaW9uX3BhcmFtcy5zaG93bl9nb2FsX3NldHRlciA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKE0uZ2FyZGVuLnNlc3Npb25fZGF0YS5pbml0aWFsX3Nlc3Npb25fcG9pbnRzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRkb2Mub24oXCJjbGlja1wiLCBcIi5zZXNzaW9uLWV4aXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU0uZ2FyZGVuLnNlc3Npb25fcGFyYW1zLnNob3duX2dvYWxfc2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29hbF9zZXR0ZXIuZ29hbHNbaWRdLmhpZGRlbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2hvbWVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvYWxfc2V0dGVyLmdvYWxzW2lkXS5zaG93UG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkZG9jLm9uKFwiY2xpY2tcIiwgJy50dXJuLW9mZicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvYWxfc2V0dGVyLmdvYWxzW2lkXS5vZmYoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KShqUXVlcnksIE1FTVJJU0UsIF8pO1xuIl19
